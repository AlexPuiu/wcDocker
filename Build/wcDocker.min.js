/**
 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/*!
 * Web Cabin Docker - Docking Layout Interface.
 *
 * Dependencies:
 *  JQuery 1.11.1
 *  JQuery-contextMenu 1.6.6
 *  font-awesome 4.2.0
 *
 * Author: Jeff Houde (lochemage@webcabin.org)
 * Web: https://docker.webcabin.org/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *   GPL v3 http://opensource.org/licenses/GPL-3.0
 *
 */

!function(){var t,e,i;!function(s){function n(t,e){return v.call(t,e)}function a(t,e){var i,s,n,a,r,o,h,l,c,_,p,d=e&&e.split("/"),f=b.map,u=f&&f["*"]||{};if(t&&"."===t.charAt(0))if(e){for(t=t.split("/"),r=t.length-1,b.nodeIdCompat&&w.test(t[r])&&(t[r]=t[r].replace(w,"")),t=d.slice(0,d.length-1).concat(t),c=0;c<t.length;c+=1)if(p=t[c],"."===p)t.splice(c,1),c-=1;else if(".."===p){if(1===c&&(".."===t[2]||".."===t[0]))break;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((d||u)&&f){for(i=t.split("/"),c=i.length;c>0;c-=1){if(s=i.slice(0,c).join("/"),d)for(_=d.length;_>0;_-=1)if(n=f[d.slice(0,_).join("/")],n&&(n=n[s])){a=n,o=c;break}if(a)break;!h&&u&&u[s]&&(h=u[s],l=c)}!a&&h&&(a=h,o=l),a&&(i.splice(0,o,a),t=i.join("/"))}return t}function r(t,e){return function(){var i=T.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),d.apply(s,i.concat([t,e]))}}function o(t){return function(e){return a(e,t)}}function h(t){return function(e){g[t]=e}}function l(t){if(n(m,t)){var e=m[t];delete m[t],$[t]=!0,p.apply(s,e)}if(!n(g,t)&&!n($,t))throw new Error("No "+t);return g[t]}function c(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function _(t){return function(){return b&&b.config&&b.config[t]||{}}}var p,d,f,u,g={},m={},b={},$={},v=Object.prototype.hasOwnProperty,T=[].slice,w=/\.js$/;f=function(t,e){var i,s=c(t),n=s[0];return t=s[1],n&&(n=a(n,e),i=l(n)),n?t=i&&i.normalize?i.normalize(t,o(e)):a(t,e):(t=a(t,e),s=c(t),n=s[0],t=s[1],n&&(i=l(n))),{f:n?n+"!"+t:t,n:t,pr:n,p:i}},u={require:function(t){return r(t)},exports:function(t){var e=g[t];return"undefined"!=typeof e?e:g[t]={}},module:function(t){return{id:t,uri:"",exports:g[t],config:_(t)}}},p=function(t,e,i,a){var o,c,_,p,d,b,v=[],T=typeof i;if(a=a||t,"undefined"===T||"function"===T){for(e=!e.length&&i.length?["require","exports","module"]:e,d=0;d<e.length;d+=1)if(p=f(e[d],a),c=p.f,"require"===c)v[d]=u.require(t);else if("exports"===c)v[d]=u.exports(t),b=!0;else if("module"===c)o=v[d]=u.module(t);else if(n(g,c)||n(m,c)||n($,c))v[d]=l(c);else{if(!p.p)throw new Error(t+" missing "+c);p.p.load(p.n,r(a,!0),h(c),{}),v[d]=g[c]}_=i?i.apply(g[t],v):void 0,t&&(o&&o.exports!==s&&o.exports!==g[t]?g[t]=o.exports:_===s&&b||(g[t]=_))}else t&&(g[t]=i)},t=e=d=function(t,e,i,n,a){if("string"==typeof t)return u[t]?u[t](e):l(f(t,e).f);if(!t.splice){if(b=t,b.deps&&d(b.deps,b.callback),!e)return;e.splice?(t=e,e=i,i=null):t=s}return e=e||function(){},"function"==typeof i&&(i=n,n=a),n?p(s,t,e,i):setTimeout(function(){p(s,t,e,i)},4),d},d.config=function(t){return d(t)},t._defined=g,i=function(t,e,i){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(i=e,e=[]),n(g,t)||n(m,t)||(m[t]=[t,e,i])},i.amd={jQuery:!0}}(),i("libs/almond",function(){}),function(t){"undefined"!=typeof i?i("dcl/mini",[],t):"undefined"!=typeof module?module.exports=t():dcl=t()}(function(){"use strict";function t(e,s){var a,l,c,_,p,d,f,u,g,m,b=[0],$=0;if(e)if(e instanceof Array){for(p={},u=e.slice(0).reverse(),g=u.length-1;g>=0;--g)if(l=u[g],l._uniqueId=l._uniqueId||r++,a=l._meta){for(f=a.bases,$=f.length-1;$>0;--$)m=f[$]._uniqueId,p[m]=(p[m]||0)+1;u[g]=f.slice(0)}else u[g]=[l];d={};t:for(;u.length;){for(g=0;g<u.length;++g)if(f=u[g],l=f[0],m=l._uniqueId,!p[m]){d[m]||(b.push(l),d[m]=1),f.shift(),f.length?--p[f[0]._uniqueId]:u.splice(g,1);continue t}t._error("cycle",s,u)}e=e[0],$=b.length-((_=e._meta)&&e===b[b.length-($=_.bases.length)]?$:1)-1}else e._uniqueId=e._uniqueId||r++,b=b.concat((_=e._meta)?_.bases:e);for(a=e?t.delegate(e[h]):{},f=e&&(_=e._meta)?t.delegate(_.weaver):{constructor:2};$>0;--$)if(l=b[$],_=l._meta,t.mix(a,_&&_.ownProps||l[h]),_)for(m in u=_.weaver)f[m]=(+f[m]||0)|u[m];for(m in s)i(_=s[m])?f[m]=+f[m]||0:a[m]=_;return _={bases:b,ownProps:s,weaver:f,chains:{}},b[0]={_meta:_,prototype:a},n(_,a),c=a[o],c._meta=_,c[h]=a,b[0]=c,t._postprocess(c)}function e(t){this.around=t}function i(t){return t&&t.spr instanceof e}function s(t){var e=[];for(var i in t)e.push(i);return e}function n(e,i){var s=e.weaver,n=e.bases,a=e.chains;for(var r in s)i[r]=t._stub(s[r],n,r,a)}var a,r=0,o="constructor",h="prototype",l={};return(a=function(t,e){for(var i in e)t[i]=e[i]})(t,{mix:a,delegate:function(t){return Object.create(t)},allKeys:s,Super:e,superCall:function(e){return t._makeSuper(e)},_makeSuper:function(t,i){var s=function(){};return s.spr=new(i||e)(t),s},_postprocess:function(t){return t},_error:function(t){throw Error("dcl: "+t)},_instantiate:function(t,e,i){var s=t.spr.around(e);return s.ctr=t.ctr,s},_extractChain:function(t,e,s){for(var n,a,r=t.length-1,c=[],_="around"==s;n=t[r];--r)((a=n._meta)?(a=a.ownProps).hasOwnProperty(e)&&(i(a=a[e])?_?a.spr.around:a=a.spr[s]:_):_&&(a=e==o?n:n[h][e])&&a!==l[e])&&(a.ctr=n,c.push(a));return c},_stubChain:function(t){var e,i=t.length;return i?1==i?(e=t[0],function(){e.apply(this,arguments)}):function(){for(var e=0;i>e;++e)t[e].apply(this,arguments)}:0},_stubSuper:function(e,s){for(var n,a=0,r=l[s];n=e[a];++a)r=i(n)?e[a]=t._instantiate(n,r,s):n;return s!=o?r:function(){r.apply(this,arguments)}},_stubChainSuper:function(e,s,n){for(var a,r,h=0,l=0;a=e[h];++h)i(a)&&(r=h-l,e[h]=t._instantiate(a,r?1==r?e[l]:s(e.slice(l,h)):0,n),l=h);return r=h-l,r?1==r&&n!=o?e[l]:s(l?e.slice(l):e):0},_stub:function(e,i,s,n){var a=n[s]=t._extractChain(i,s,"around");return(e?t._stubChainSuper(a,t._stubChain,s):t._stubSuper(a,s))||function(){}}}),t}),function(t){"undefined"!=typeof i?i("dcl/dcl",["./mini"],t):"undefined"!=typeof module?module.exports=t(e("./mini")):dcl=t(dcl)}(function(t){"use strict";function e(){}function i(e){return t._makeSuper(e,a)}function s(t,i,s){var n=t||e,a=i||e,r=s||e,o=function(){var t,e;n.apply(this,arguments);try{t=r.apply(this,arguments)}catch(i){t=i,e=!0}if(a.call(this,arguments,t),e)throw t;return t};return o.advices={before:t,after:i,around:s},o}function n(e){return function(i,s){var n,a=i._meta;a&&(n=+a.weaver[s]||0,n&&n!=e&&t._error("set chaining",s,i,e,n),a.weaver[s]=e)}}var a=t(t.Super,{constructor:function(){this.before=this.around.before,this.after=this.around.after,this.around=this.around.around}});return t.mix(t,{Advice:a,advise:i,before:function(e){return t.advise({before:e})},after:function(e){return t.advise({after:e})},around:t.superCall,chainBefore:n(1),chainAfter:n(2),isInstanceOf:function(t,e){if(t instanceof e)return!0;var i,s=t.constructor._meta;if(s)for(s=s.bases,i=s.length-1;i>=0;--i)if(s[i]===e)return!0;return!1},_stub:function(e,i,n,a){var r=a[n]=t._extractChain(i,n,"around"),o=t._extractChain(i,n,"before").reverse(),h=t._extractChain(i,n,"after");return r=e?t._stubChainSuper(r,1==e?function(e){return t._stubChain(e.reverse())}:t._stubChain,n):t._stubSuper(r,n),o.length||h.length?s(t._stubChain(o),t._stubChain(h),r):r||function(){}}}),t}),i("wcDocker/types",[],function(){var t={};return t.DOCK={MODAL:"modal",FLOAT:"float",TOP:"top",LEFT:"left",RIGHT:"right",BOTTOM:"bottom",STACKED:"stacked"},t.LAYOUT={SIMPLE:"wcLayoutSimple",TABLE:"wcLayoutTable"},t.EVENT={INIT:"panelInit",LOADED:"dockerLoaded",UPDATED:"panelUpdated",VISIBILITY_CHANGED:"panelVisibilityChanged",BEGIN_DOCK:"panelBeginDock",END_DOCK:"panelEndDock",GAIN_FOCUS:"panelGainFocus",LOST_FOCUS:"panelLostFocus",CLOSED:"panelClosed",PERSISTENT_CLOSED:"panelPersistentClosed",PERSISTENT_OPENED:"panelPersistentOpened",BUTTON:"panelButton",ATTACHED:"panelAttached",DETACHED:"panelDetached",MOVE_STARTED:"panelMoveStarted",MOVE_ENDED:"panelMoveEnded",MOVED:"panelMoved",RESIZE_STARTED:"panelResizeStarted",RESIZE_ENDED:"panelResizeEnded",RESIZED:"panelResized",SCROLLED:"panelScrolled",SAVE_LAYOUT:"layoutSave",RESTORE_LAYOUT:"layoutRestore",CUSTOM_TAB_CHANGED:"customTabChanged",CUSTOM_TAB_CLOSED:"customTabClosed"},t.PANEL_PLACEHOLDER="__wcDockerPlaceholderPanel",t.COLLAPSED="__wcDockerCollapsedPanel",t.ORIENTATION={VERTICAL:!1,HORIZONTAL:!0},t.TAB={TOP:"top",LEFT:"left",RIGHT:"right",BOTTOM:"bottom"},t}),i("wcDocker/layoutsimple",["dcl/dcl","./types"],function(t,e){var i=t(null,{declaredClass:"wcLayoutSimple",constructor:function(t,e){this.$container=$(t),this._parent=e,this.$elem=null,this.__init()},addItem:function(t){this.$elem.append(t)},clear:function(){this.$elem.remove(),this.$elem=null,this.__init()},scene:function(){return this.$elem},__init:function(){this.$elem=$('<div class="wcLayout wcWide wcTall"></div>'),this.__container(this.$container)},__update:function(){},__checkAnchorDrop:function(t,i,s,n,a,r,o,h,l){function c(t,e,i){return"number"==typeof t||"string"==typeof t&&-1!==t.indexOf("px",t.length-2)?(t=parseInt(t),{x:t,y:t}):"string"==typeof t&&-1!==t.indexOf("%",t.length-1)?(t=parseInt(t)/100,{x:e*t,y:i*t}):{x:0,y:0}}var _=this._parent.docker(),p=a.outerWidth(),d=a.outerHeight(),f=a.offset(),u=a.find(".wcFrameTitleBar").height();r||(u=0);var g=c(_._options.edgeAnchorSize,_.$container.outerWidth(),_.$container.outerHeight()),m=c(_._options.panelAnchorSize,p,d);if(r){if((!h||h===e.TAB.TOP)&&t.y>=f.top&&t.y<=f.top+u&&t.x>=f.left&&t.x<=f.left+p)return s.anchor(t,{x:f.left-2,y:f.top-2,w:p,h:u-2,loc:e.DOCK.STACKED,tab:e.TAB.TOP,item:this,self:i===e.TAB.TOP||o&&i}),!0;if(_._canOrientTabs){if((!h||h===e.TAB.BOTTOM)&&t.y>=f.top+d-u&&t.y<=f.top+d&&t.x>=f.left&&t.x<=f.left+p)return s.anchor(t,{x:f.left-2,y:f.top+d-u-2,w:p,h:u,loc:e.DOCK.STACKED,tab:e.TAB.BOTTOM,item:this,self:i===e.TAB.BOTTOM}),!0;if((!h||h===e.TAB.LEFT)&&t.y>=f.top&&t.y<=f.top+d&&t.x>=f.left&&t.x<=f.left+u)return s.anchor(t,{x:f.left-2,y:f.top-2,w:u-2,h:d,loc:e.DOCK.STACKED,tab:e.TAB.LEFT,item:this,self:i===e.TAB.LEFT}),!0;if((!h||h===e.TAB.RIGHT)&&t.y>=f.top&&t.y<=f.top+d&&t.x>=f.left+p-u&&t.x<=f.left+p)return s.anchor(t,{x:f.left+p-u-2,y:f.top-2,w:u,h:d,loc:e.DOCK.STACKED,tab:e.TAB.RIGHT,item:this,self:i===e.TAB.RIGHT}),!0}}if(l&&s._outer&&s._inner){var b=s._outer.$container.outerWidth(),$=s._outer.$container.outerHeight(),v=s._outer.$container.offset();if(t.y>=v.top&&t.y<=v.top+$&&t.x>=v.left+u&&t.x<=v.left+u+g.x)return s.anchor(t,{x:v.left-2,y:v.top-2,w:b/3,h:$,loc:e.DOCK.LEFT,item:s._inner,self:!1}),!0;if(t.y>=v.top&&t.y<=v.top+$&&t.x>=v.left+b-g.x-u&&t.x<=v.left+b-u)return s.anchor(t,{x:v.left+b-b/3-2,y:v.top-2,w:b/3,h:$,loc:e.DOCK.RIGHT,item:s._inner,self:!1}),!0;if(t.y>=v.top+u&&t.y<=v.top+u+g.y&&t.x>=v.left&&t.x<=v.left+b)return s.anchor(t,{x:v.left-2,y:v.top-2,w:b,h:$/3,loc:e.DOCK.TOP,item:s._inner,self:!1}),!0;if(t.y>=v.top+$-u-g.y&&t.y<=v.top+$-u&&t.x>=v.left&&t.x<=v.left+b)return s.anchor(t,{x:v.left-2,y:v.top+$-$/3-2,w:b,h:$/3,loc:e.DOCK.BOTTOM,item:s._inner,self:!1}),!0}if(!n)return!1;if(this._parent instanceof wcPanel&&this._parent._isPlaceholder)return s.anchor(t,{x:f.left-2,y:f.top-2,w:p,h:d,loc:e.DOCK.TOP,item:this,self:!1}),!0;if(d>p){if(t.y>=f.top&&t.y<=f.top+u+m.y&&t.x>=f.left&&t.x<=f.left+p)return s.anchor(t,{x:f.left-2,y:f.top-2,w:p,h:.5*d,loc:e.DOCK.TOP,item:this,self:!1}),!0;if(t.y>=f.top+d-m.y-u&&t.y<=f.top+d&&t.x>=f.left&&t.x<=f.left+p)return s.anchor(t,{x:f.left-2,y:f.top+(d-.5*d)-2,w:p,h:.5*d,loc:e.DOCK.BOTTOM,item:this,self:!1}),!0}if(t.y>=f.top&&t.y<=f.top+d){if(t.x>=f.left&&t.x<=f.left+m.x+u)return s.anchor(t,{x:f.left-2,y:f.top-2,w:.5*p,h:d,loc:e.DOCK.LEFT,item:this,self:!1}),!0;if(t.x>=f.left+p-m.x-u&&t.x<=f.left+p)return s.anchor(t,{x:f.left+.5*p-2,y:f.top-2,w:.5*p,h:d,loc:e.DOCK.RIGHT,item:this,self:!1}),!0}if(p>=d){if(t.y>=f.top&&t.y<=f.top+m.y+u&&t.x>=f.left&&t.x<=f.left+p)return s.anchor(t,{x:f.left-2,y:f.top-2,w:p,h:.5*d,loc:e.DOCK.TOP,item:this,self:!1}),!0;if(t.y>=f.top+d-m.y-u&&t.y<=f.top+d&&t.x>=f.left&&t.x<=f.left+p)return s.anchor(t,{x:f.left-2,y:f.top+(d-.5*d)-2,w:p,h:.5*d,loc:e.DOCK.BOTTOM,item:this,self:!1}),!0}return!1},__container:function(t){return"undefined"==typeof t?this.$container:(this.$container=t,this.$container?this.$container.append(this.$elem):this.$elem.remove(),this.$container)},__destroy:function(){this.__container(null),this._parent=null,this.clear(),this.$elem.remove(),this.$elem=null}});return window.wcLayoutSimple=i,i}),i("wcDocker/layouttable",["dcl/dcl","./types"],function(t,e){var i=t(null,{declaredClass:"wcLayoutTable",constructor:function(t,e){this.$container=$(t),this._parent=e,this._batchProcess=!1,this._grid=[],this.$table=null,this.__init()},addItem:function(t,e,i,s,n){return("undefined"==typeof e||0>e)&&(e=0),("undefined"==typeof i||0>i)&&(i=0),("undefined"==typeof s||0>=s)&&(s=1),("undefined"==typeof n||0>=n)&&(n=1),this.__resizeGrid(e+s-1,i+n-1),(s>1||n>1)&&!this.__mergeGrid(e,i,s,n)?!1:(this._grid[i][e].$el.append($(t)),this.item(e,i))},item:function(t,e){if(e>=this._grid.length)return!1;if(t>=this._grid[e].length)return!1;var i=this,s={$:i._grid[e][t].$el,css:function(n,a){if(i._grid[e][t].$el){if(void 0===a)return i._grid[e][t].$el.css(n);i._grid[e][t].$el.css(n,a)}return s},stretch:function(n,a){return i.itemStretch(t,e,n,a),s}};return s},itemStretch:function(t,e,i,s){var n=this._batchProcess;this._batchProcess=!0,this.__resizeGrid(t,e);var a=this._grid[e][t];return a.x<0||a.y<0?!1:(void 0!==i&&(a.sx=i),void 0!==s&&(a.sy=s),this._batchProcess=n,n||this.__resizeGrid(0,0),!0)},clear:function(){var t=this.showGrid(),e=this.gridSpacing(),i=this.gridAlternate();this.$table.remove(),this.__init(),this.showGrid(t),this.gridSpacing(e),this.gridAlternate(i),this._grid=[]},startBatch:function(){this._batchProcess=!0},finishBatch:function(){this._batchProcess=!1,this.__resizeGrid(0,0)},showGrid:function(t){return"undefined"!=typeof t&&this.$table.toggleClass("wcLayoutGrid",t),this.$table.hasClass("wcLayoutGrid")},gridSpacing:function(t){return"undefined"!=typeof t&&this.$table.css("border-spacing",t+"px"),parseInt(this.$table.css("border-spacing"))},gridAlternate:function(t){return"undefined"!=typeof t&&this.$table.toggleClass("wcLayoutGridAlternate",t),this.$table.hasClass("wcLayoutGridAlternate")},scene:function(){return this.$table},__init:function(){this.$table=$('<table class="wcLayout wcWide wcTall"></table>'),this.$table.append($("<tbody></tbody>")),this.__container(this.$container)},__update:function(){},__resizeGrid:function(t,e){for(var i=0;e>=i;++i){if(this._grid.length<=i){var s=[];s.$row=$("<tr>"),this._grid.push(s)}for(var n=0;t>=n;++n)this._grid[i].length<=n&&this._grid[i].push({$el:$("<td>"),x:0,y:0,sx:"",sy:""})}if(!this._batchProcess){var a=this.$table.find("tbody");$(".wcDockerTransition").append(a);for(var r=$("<tbody>"),i=0;i<this._grid.length;++i)for(var o=null,n=0;n<this._grid[i].length;++n){var h=this._grid[i][n];h.$el&&(o||(o=this._grid[i].$row,r.append(o)),h.$el.css("width",h.sx),h.$el.css("height",h.sy),o.append(h.$el))}this.$table.append(r),a.remove()}},__mergeGrid:function(t,e,i,s){for(var n=0;s>n;++n)for(var a=0;i>a;++a){var r=this._grid[e+n][t+a];if(!r.$el||0!==r.x||0!==r.y)return!1}var r=this._grid[e][t];i>1&&(r.$el.attr("colspan",""+i),r.x=i-1),s>1&&(r.$el.attr("rowspan",""+s),r.y=s-1);for(var n=0;s>n;++n)for(var a=0;i>a;++a)if(0!==n||0!==a){var r=this._grid[e+n][t+a];r.$el.remove(),r.$el=null,r.x=-a,r.y=-n}return!0},__checkAnchorDrop:function(t,i,s,n,a,r,o,h,l){function c(t,e,i){return"number"==typeof t||"string"==typeof t&&-1!==t.indexOf("px",t.length-2)?(t=parseInt(t),{x:t,y:t}):"string"==typeof t&&-1!==t.indexOf("%",t.length-1)?(t=parseInt(t)/100,{x:e*t,y:i*t}):{x:0,y:0}}var _=this._parent.docker(),p=a.outerWidth(),d=a.outerHeight(),f=a.offset(),u=a.find(".wcFrameTitleBar").height();r||(u=0);var g=c(_._options.edgeAnchorSize,_.$container.outerWidth(),_.$container.outerHeight()),m=c(_._options.panelAnchorSize,p,d);if(r){if((!h||h===e.TAB.TOP)&&t.y>=f.top&&t.y<=f.top+u&&t.x>=f.left&&t.x<=f.left+p)return s.anchor(t,{x:f.left-2,y:f.top-2,w:p,h:u-2,loc:e.DOCK.STACKED,tab:e.TAB.TOP,item:this,self:i===e.TAB.TOP||o&&i}),!0;if(_._canOrientTabs){if((!h||h===e.TAB.BOTTOM)&&t.y>=f.top+d-u&&t.y<=f.top+d&&t.x>=f.left&&t.x<=f.left+p)return s.anchor(t,{x:f.left-2,y:f.top+d-u-2,w:p,h:u,loc:e.DOCK.STACKED,tab:e.TAB.BOTTOM,item:this,self:i===e.TAB.BOTTOM}),!0;if((!h||h===e.TAB.LEFT)&&t.y>=f.top&&t.y<=f.top+d&&t.x>=f.left&&t.x<=f.left+u)return s.anchor(t,{x:f.left-2,y:f.top-2,w:u-2,h:d,loc:e.DOCK.STACKED,tab:e.TAB.LEFT,item:this,self:i===e.TAB.LEFT}),!0;if((!h||h===e.TAB.RIGHT)&&t.y>=f.top&&t.y<=f.top+d&&t.x>=f.left+p-u&&t.x<=f.left+p)return s.anchor(t,{x:f.left+p-u-2,y:f.top-2,w:u,h:d,loc:e.DOCK.STACKED,tab:e.TAB.RIGHT,item:this,self:i===e.TAB.RIGHT}),!0}}if(l&&s._outer&&s._inner){var b=s._outer.$container.outerWidth(),$=s._outer.$container.outerHeight(),v=s._outer.$container.offset();if(t.y>=v.top&&t.y<=v.top+$&&t.x>=v.left+u&&t.x<=v.left+u+g.x)return s.anchor(t,{x:v.left-2,y:v.top-2,w:b/3,h:$,loc:e.DOCK.LEFT,item:s._inner,self:!1}),!0;if(t.y>=v.top&&t.y<=v.top+$&&t.x>=v.left+b-g.x-u&&t.x<=v.left+b-u)return s.anchor(t,{x:v.left+b-b/3-2,y:v.top-2,w:b/3,h:$,loc:e.DOCK.RIGHT,item:s._inner,self:!1}),!0;if(t.y>=v.top+u&&t.y<=v.top+u+g.y&&t.x>=v.left&&t.x<=v.left+b)return s.anchor(t,{x:v.left-2,y:v.top-2,w:b,h:$/3,loc:e.DOCK.TOP,item:s._inner,self:!1}),!0;if(t.y>=v.top+$-u-g.y&&t.y<=v.top+$-u&&t.x>=v.left&&t.x<=v.left+b)return s.anchor(t,{x:v.left-2,y:v.top+$-$/3-2,w:b,h:$/3,loc:e.DOCK.BOTTOM,item:s._inner,self:!1}),!0}if(!n)return!1;if(this._parent instanceof wcPanel&&this._parent._isPlaceholder)return s.anchor(t,{x:f.left-2,y:f.top-2,w:p,h:d,loc:e.DOCK.TOP,item:this,self:!1}),!0;if(d>p){if(t.y>=f.top&&t.y<=f.top+u+m.y&&t.x>=f.left&&t.x<=f.left+p)return s.anchor(t,{x:f.left-2,y:f.top-2,w:p,h:.5*d,loc:e.DOCK.TOP,item:this,self:!1}),!0;if(t.y>=f.top+d-m.y-u&&t.y<=f.top+d&&t.x>=f.left&&t.x<=f.left+p)return s.anchor(t,{x:f.left-2,y:f.top+(d-.5*d)-2,w:p,h:.5*d,loc:e.DOCK.BOTTOM,item:this,self:!1}),!0}if(t.y>=f.top&&t.y<=f.top+d){if(t.x>=f.left&&t.x<=f.left+m.x+u)return s.anchor(t,{x:f.left-2,y:f.top-2,w:.5*p,h:d,loc:e.DOCK.LEFT,item:this,self:!1}),!0;if(t.x>=f.left+p-m.x-u&&t.x<=f.left+p)return s.anchor(t,{x:f.left+.5*p-2,y:f.top-2,w:.5*p,h:d,loc:e.DOCK.RIGHT,item:this,self:!1}),!0}if(p>=d){if(t.y>=f.top&&t.y<=f.top+m.y+u&&t.x>=f.left&&t.x<=f.left+p)return s.anchor(t,{x:f.left-2,y:f.top-2,w:p,h:.5*d,loc:e.DOCK.TOP,item:this,self:!1}),!0;if(t.y>=f.top+d-m.y-u&&t.y<=f.top+d&&t.x>=f.left&&t.x<=f.left+p)return s.anchor(t,{x:f.left-2,y:f.top+(d-.5*d)-2,w:p,h:.5*d,loc:e.DOCK.BOTTOM,item:this,self:!1}),!0}return!1},__container:function(t){return"undefined"==typeof t?this.$container:(this.$container=t,this.$container?this.$container.append(this.$table):this.$table.remove(),this.$container)},__destroy:function(){this.__container(null),this._parent=null,this.clear(),this.$table.remove(),this.$table=null}});return window.wcLayoutTable=i,i}),i("wcDocker/base",["dcl/dcl"],function(t){return t(null,{instanceOf:function(t,e){return t=t||this,t&&t.declaredClass===e?!0:!1},docker:function(t){for(var e=t||this._parent;e&&!e.instanceOf(null,"wcDocker");)e=e._parent;return e}})}),i("wcDocker/panel",["dcl/dcl","./types","./layoutsimple","./layouttable","./base"],function(t,e,i,s,n){var a=t(n,{declaredClass:"wcPanel",constructor:function(t,e){this.$container=null,this._parent=null,this.$icon=null,this.$title=null,this.$titleText=null,this.$loading=null,this._panelObject=null,this._initialized=!1,this._collapseDirection=void 0,this._type=t,this._title=t,this._titleVisible=!0,this._options=e,this._layout=null,this._buttonList=[],this._actualPos={x:.5,y:.5},this._actualSize={x:0,y:0},this._resizeData={time:-1,timeout:!1,delta:150},this._pos={x:.5,y:.5},this._moveData={time:-1,timeout:!1,delta:150},this._size={x:-1,y:-1},this._minSize={x:100,y:100},this._maxSize={x:1/0,y:1/0},this._scroll={x:0,y:0},this._scrollable={x:!0,y:!0},this._collapsible=!0,this._overflowVisible=!1,this._moveable=!0,this._closeable=!0,this._resizeVisible=!0,this._isVisible=!1,this._events={},this.__init()},title:function(t){return"undefined"!=typeof t&&(t===!1?(this._titleVisible=!1,this.$titleText.html(this._type)):(this._title=t,this.$titleText.html(t)),this.$icon&&this.$titleText.prepend(this.$icon),this._parent instanceof wcFrame&&this._parent.__updateTabs()),this._title},info:function(){return this.docker().panelTypeInfo(this._type)},layout:function(){return this._layout},focus:function(t){var e=this.docker();if(e){e.__focus(this._parent,t);for(var i=0;i<this._parent._panelList.length;++i)if(this._parent._panelList[i]===this&&this._parent._curTab!==i){this._parent.panel(i);break}}},collapseDirection:function(t){this._collapseDirection=t},isVisible:function(){return this._isVisible},isFloating:function(){return this._parent instanceof wcFrame?this._parent._isFloating:!1},isInFocus:function(){var t=this.docker();return t&&this._parent instanceof wcFrame?this._parent===t._focusFrame:!1},addButton:function(t,e,i,s,n,a){this._buttonList.push({name:t,className:e,toggleClassName:a,text:i,tip:s,isTogglable:n,isToggled:!1}),this._parent instanceof wcFrame&&this._parent.__update()},removeButton:function(t){for(var e=0;e<this._buttonList.length;++e)if(this._buttonList[e].name===t)return this._buttonList.splice(e,1),this._parent instanceof wcFrame&&this._parent.__onTabChange(),this._parent instanceof wcFrame&&this._parent.__update(),!0;return!1},buttonState:function(t,e){for(var i=0;i<this._buttonList.length;++i)if(this._buttonList[i].name===t)return"undefined"!=typeof e&&(this._buttonList[i].isToggled=e,this._parent instanceof wcFrame&&this._parent.__onTabChange()),this._parent instanceof wcFrame&&this._parent.__update(),this._buttonList[i].isToggled;return!1},initPos:function(t,e){if("undefined"!=typeof t){var i=this.docker();i?this._pos.x=i.__stringToPercent(t,i.$container.width()):this._pos.x=t}if("undefined"!=typeof e){var i=this.docker();i?this._pos.y=i.__stringToPercent(e,i.$container.height()):this._pos.y=e}return{x:this._pos.x,y:this._pos.y}},initSize:function(t,e){if("undefined"!=typeof t){var i=this.docker();i?this._size.x=i.__stringToPixel(t,i.$container.width()):this._size.x=t}if("undefined"!=typeof e){var i=this.docker();i?this._size.y=i.__stringToPixel(e,i.$container.height()):this._size.y=e}return{x:this._size.x,y:this._size.y}},minSize:function(t,e){if("undefined"!=typeof t){var i=this.docker();i?this._minSize.x=i.__stringToPixel(t,i.$container.width()):this._minSize.x=t}if("undefined"!=typeof e){var i=this.docker();i?this._minSize.y=i.__stringToPixel(e,i.$container.height()):this._minSize.y=e}return{x:this._minSize.x,y:this._minSize.y}},maxSize:function(t,e){if("undefined"!=typeof t){var i=this.docker();i?this._maxSize.x=i.__stringToPixel(t,i.$container.width()):this._maxSize.x=t}if("undefined"!=typeof e){var i=this.docker();i?this._maxSize.y=i.__stringToPixel(e,i.$container.height()):this._maxSize.y=e}return{x:this._maxSize.x,y:this._maxSize.y}},width:function(){return this.$container?this.$container.width():0},height:function(){return this.$container?this.$container.height():0},icon:function(t){this.$icon||(this.$icon=$("<div>"),this.$titleText.prepend(this.$icon)),this.$icon.removeClass(),this.$icon.addClass("wcTabIcon "+t),this._parent instanceof wcFrame&&this._parent.__updateTabs()},faicon:function(t){this.$icon||(this.$icon=$("<div>"),this.$titleText.prepend(this.$icon)),this.$icon.removeClass(),this.$icon.addClass("wcTabIcon fa fa-fw fa-"+t),this._parent instanceof wcFrame&&this._parent.__updateTabs()},scrollable:function(t,e){return"undefined"!=typeof t&&(this._scrollable.x=t?!0:!1,this._scrollable.y=e?!0:!1),{x:this._scrollable.x,y:this._scrollable.y}},scroll:function(t,e,i){return this.$container?("undefined"!=typeof t&&(i?this.$container.parent().stop().animate({scrollLeft:t,scrollTop:e},i):(this.$container.parent().scrollLeft(t),this.$container.parent().scrollTop(e))),{x:this.$container.parent().scrollLeft(),y:this.$container.parent().scrollTop()}):{x:0,y:0}},collapsible:function(t){return"undefined"!=typeof t&&(this._collapsible=t?!0:!1),this._collapsible},overflowVisible:function(t){return"undefined"!=typeof t&&(this._overflowVisible=t?!0:!1),this._overflowVisible},resizeVisible:function(t){return"undefined"!=typeof t&&(this._resizeVisible=t?!0:!1),this._resizeVisible},moveable:function(t){return"undefined"!=typeof t&&(this._moveable=t?!0:!1,this.$title.toggleClass("wcNotMoveable",!this._moveable)),this._moveable},closeable:function(t){return"undefined"!=typeof t&&(this._closeable=t?!0:!1,this._parent&&this._parent.__update()),this._closeable},close:function(){this._parent&&this._parent.$close.click()},startLoading:function(t,e,i){if(!this.$loading){this.$loading=$('<div class="wcLoadingContainer"></div>'),this.$container.append(this.$loading);var s=$('<div class="wcLoadingBackground"></div>');"number"!=typeof e&&(e=.4),this.$loading.append(s);var n=$('<div class="wcLoadingIconContainer"><i class="wcLoadingIcon '+this.docker()._options.loadingClass+'"></i></div>');if(this.$loading.append(n),t){var a=$('<span class="wcLoadingLabel">'+t+"</span>");this.$loading.append(a)}"number"!=typeof i&&(i=1),this.docker().$loading&&(e=0,i=0),s.css("opacity",e),n.css("opacity",i),a&&a.css("opacity",i)}},finishLoading:function(t){if(this.$loading)if(t>0){var e=this;this.$loading.fadeOut(t,function(){e.$loading.remove(),e.$loading=null,e.docker().__testLoadFinished()})}else this.$loading.remove(),this.$loading=null,this.docker().__testLoadFinished()},on:function(t,e){return t?(this._events[t]||(this._events[t]=[]),-1!==this._events[t].indexOf(e)?!1:(this._events[t].push(e),!0)):!1},off:function(t,e){if("undefined"==typeof t)return void(this._events={});if(this._events[t])if("undefined"==typeof e)this._events[t]=[];else for(var i=0;i<this._events[t].length;++i)if(this._events[t][i]===e){this._events[t].splice(i,1);break}},trigger:function(t,e){var i=this.docker();i&&i.trigger(t,e)},__init:function(){var t=this._options&&this._options.layout||"wcLayoutTable";this._layout=new window[t](this.$container,this),this.$title=$('<div class="wcPanelTab">'),this.$titleText=$("<div>"+this._title+"</div>"),this.$title.append(this.$titleText),this._options.hasOwnProperty("title")&&this.title(this._options.title),this._options.icon&&this.icon(this._options.icon),this._options.faicon&&this.faicon(this._options.faicon)},__update:function(){var t=this.docker();if(t&&(this._layout.__update(),this.$container)){if(this._resizeVisible?this._parent.$frame.removeClass("wcHideOnResize"):this._parent.$frame.addClass("wcHideOnResize"),this._initialized)this.__trigger(e.EVENT.UPDATED);else{this._initialized=!0;var i=this;setTimeout(function(){i.__trigger(e.EVENT.INIT),t.__testLoadFinished()},0)}var s=this.$container.width(),n=this.$container.height();(this._actualSize.x!==s||this._actualSize.y!==n)&&(this._actualSize.x=s,this._actualSize.y=n,this._resizeData.time=new Date,this._resizeData.timeout||(this._resizeData.timeout=!0,setTimeout(this.__resizeEnd.bind(this),this._resizeData.delta),this.__trigger(e.EVENT.RESIZE_STARTED,{width:this._actualSize.x,height:this._actualSize.y})),this.__trigger(e.EVENT.RESIZED,{width:this._actualSize.x,height:this._actualSize.y}));var a=this.$container.offset();(this._actualPos.x!==a.left||this._actualPos.y!==a.top)&&(this._actualPos.x=a.left,this._actualPos.y=a.top,this._moveData.time=new Date,this._moveData.timeout||(this._moveData.timeout=!0,setTimeout(this.__moveEnd.bind(this),this._moveData.delta),this.__trigger(e.EVENT.MOVE_STARTED,{x:this._actualPos.x,y:this._actualPos.y})),this.__trigger(e.EVENT.MOVED,{x:this._actualPos.x,y:this._actualPos.y}))}},__resizeEnd:function(){new Date-this._resizeData.time<this._resizeData.delta?setTimeout(this.__resizeEnd.bind(this),this._resizeData.delta):(this._resizeData.timeout=!1,this.__trigger(e.EVENT.RESIZE_ENDED,{width:this._actualSize.x,height:this._actualSize.y}))},__moveEnd:function(){new Date-this._moveData.time<this._moveData.delta?setTimeout(this.__moveEnd.bind(this),this._moveData.delta):(this._moveData.timeout=!1,this.__trigger(e.EVENT.MOVE_ENDED,{x:this._actualPos.x,y:this._actualPos.y}))},__isVisible:function(t){this._isVisible!==t&&(this._isVisible=t,this.__trigger(e.EVENT.VISIBILITY_CHANGED,this._isVisible))},__save:function(){var t={};return t.type="wcPanel",t.panelType=this._type,t.size={x:this._size.x,y:this._size.y},t.customData={},this.__trigger(e.EVENT.SAVE_LAYOUT,t.customData),t},__restore:function(t,i){t.size&&(this._size.x=t.size.x,this._size.y=t.size.y),this.__trigger(e.EVENT.RESTORE_LAYOUT,t.customData)},__trigger:function(t,e){if(!t)return!1;if(this._events[t])for(var i=this._events[t].slice(0),s=0;s<i.length;++s)i[s].call(this,e)},__rect:function(){var t=this.$container.offset(),e=this.$container.width(),i=this.$container.height();return{x:t.left,y:t.top,w:e,h:i}},__container:function(t){return"undefined"==typeof t?this.$container:(this.$container=t,this.$container?(this._layout.__container(this.$container),this.$loading&&this.$container.append(this.$loading)):(this._layout.__container(null),this.finishLoading()),this.$container)},__destroy:function(){this._panelObject=null,this.off(),this.__container(null),this._parent=null}});return window.wcPanel=a,a}),i("wcDocker/ghost",["dcl/dcl","./types"],function(t,e){var i=t(null,{declaredClass:"wcGhost",constructor:function(t,e,i){this.$ghost=null,this._rect,this._anchorMouse=!1,this._anchor=null,this._docker=i,this._outer=i.__findInner(),this._outer instanceof wcSplitter&&(this._inner=this._outer.right()),this.__init(t,e)},update:function(t){this.__move(t);for(var e=0;e<this._docker._floatingList.length;++e){var i=this._docker._floatingList[e].__rect();if(t.x>i.x&&t.y>i.y&&t.x<i.x+i.w&&t.y<i.y+i.h)return void(this._docker._floatingList[e].__checkAnchorDrop(t,!1,this,!0,void 0,!0)?this._anchor.panel=this._docker._floatingList[e].panel():this.anchor(t,null))}for(var e=0;e<this._docker._frameList.length;++e){var i=this._docker._frameList[e].__rect();if(t.x>i.x&&t.y>i.y&&t.x<i.x+i.w&&t.y<i.y+i.h)return void(this._docker._frameList[e].__checkAnchorDrop(t,!1,this,!0,void 0,!0)?this._anchor.panel=this._docker._frameList[e].panel():this.anchor(t,null))}},anchor:function(t,i){if("undefined"==typeof t)return this._anchor;if(!i||!this._anchor||i.loc!==this._anchor.loc||i.item!==this._anchor.item){var s={x:parseInt(this.$ghost.css("left")),y:parseInt(this.$ghost.css("top")),w:parseInt(this.$ghost.css("width")),h:parseInt(this.$ghost.css("height"))};if(this._anchorMouse={x:s.x-t.x,y:s.y-t.y},this._rect.x=-this._anchorMouse.x,this._rect.y=-this._anchorMouse.y,!i){if(!this._anchor)return;if(this._docker._draggingFrame&&this._docker._draggingFrame.$container){var n=this._docker._draggingFrame._panelList[0]._options.detachToWidth||this._docker._options.detachToWidth||this._rect.w,a=this._docker._draggingFrame._panelList[0]._options.detachToHeight||this._docker._options.detachToHeight||this._rect.h;this._rect.w=this._docker.__stringToPixel(n,this._docker.$container.width()),this._rect.h=this._docker.__stringToPixel(a,this._docker.$container.height())}return this._anchor=null,this.$ghost.show(),void this.$ghost.stop().animate({opacity:.3,"margin-left":this._rect.x-this._rect.w/2+"px","margin-top":this._rect.y-10+"px",width:this._rect.w+"px",height:this._rect.h+"px"},150)}this._anchor=i;var r=.8;i.self&&i.loc===e.DOCK.STACKED?(r=0,this.$ghost.hide()):this.$ghost.show(),this.$ghost.stop().animate({opacity:r,"margin-left":"2px","margin-top":"2px",border:"0px",left:i.x+"px",top:i.y+"px",width:i.w+"px",height:i.h+"px"},150)}},rect:function(){return{x:this.$ghost.offset().left,y:this.$ghost.offset().top,w:parseInt(this.$ghost.css("width")),h:parseInt(this.$ghost.css("height")),tabOrientation:this._anchor&&this._anchor.tab}},destroy:function(){this.__destroy()},__init:function(t,e){this.$ghost=$('<div class="wcGhost">').css("opacity",0).css("top",t.y+"px").css("left",t.x+"px").css("width",t.w+"px").css("height",t.h+"px"),this._anchorMouse={x:t.x-e.x,y:t.y-e.y},this._rect={x:-this._anchorMouse.x,y:-this._anchorMouse.y,w:t.w,h:t.h},$("body").append(this.$ghost),this.anchor(e,t)},__move:function(t){if(!this._anchor){var e=parseInt(this.$ghost.css("left")),i=parseInt(this.$ghost.css("top"));e=t.x+this._anchorMouse.x,i=t.y+this._anchorMouse.y,
this.$ghost.css("left",e+"px"),this.$ghost.css("top",i+"px")}},__rect:function(){return this._rect},__destroy:function(){this.$ghost.stop().animate({opacity:0},{duration:175,complete:function(){$(this).remove()}})}});return window.wcGhost=i,i}),i("wcDocker/splitter",["dcl/dcl","./types","./base"],function(t,e,i){var s=t(i,{declaredClass:"wcSplitter",constructor:function(t,e,i){this.$container=$(t),this._parent=e,this._orientation=i,this._pane=[!1,!1],this.$pane=[],this.$bar=null,this._pos=.5,this._posTarget=.5,this._pixelPos=-1,this._findBestPos=!1,this._anim=0,this._boundEvents=[],this.__init(),this.docker()._splitterList.push(this)},initLayouts:function(t,e){var i=t||"wcLayoutTable",s=new window[i](this.$pane[0],this);i=e||"wcLayoutTable";var n=new window[i](this.$pane[1],this);this.pane(0,s),this.pane(1,n)},orientation:function(t){return"undefined"==typeof t?this._orientation:void(this._orientation!=t&&(this._orientation=t,this._orientation?this.$bar.removeClass("wcWide").removeClass("wcSplitterBarH").addClass("wcTall").addClass("wcSplitterBarV"):this.$bar.removeClass("wcTall").removeClass("wcSplitterBarV").addClass("wcWide").addClass("wcSplitterBarH"),this.$pane[0].css("top","").css("left","").css("width","").css("height",""),this.$pane[1].css("top","").css("left","").css("width","").css("height",""),this.$bar.css("top","").css("left","").css("width","").css("height",""),this.__update(),this._parent instanceof wcPanel&&this._parent.__trigger(e.EVENT.UPDATED)))},minSize:function(){var t,e;return this._pane[0]&&"function"==typeof this._pane[0].minSize&&(t=this._pane[0].minSize()),this._pane[1]&&"function"==typeof this._pane[1].minSize&&(e=this._pane[1].minSize()),t&&e?(this._orientation?(t.x+=e.x,t.y=Math.max(t.y,e.y)):(t.y+=e.y,t.x=Math.max(t.x,e.x)),t):t?t:e?e:!1},maxSize:function(){var t,e;return this._pane[0]&&"function"==typeof this._pane[0].maxSize&&(t=this._pane[0].maxSize()),this._pane[1]&&"function"==typeof this._pane[1].maxSize&&(e=this._pane[1].maxSize()),t&&e?(this._orientation?(t.x+=e.x,t.y=Math.min(t.y,e.y)):(t.y+=e.y,t.x=Math.min(t.x,e.x)),t):t?t:e?e:!1},pos:function(t){return"undefined"!=typeof t&&(this._pos=this._posTarget=t,this.__update(),this._parent instanceof wcPanel&&this._parent.__trigger(e.EVENT.UPDATED)),this._posTarget},animPos:function(t,e){this._posTarget=t;var i=this;this.$bar.queue(function(t){i._anim&&clearInterval(i._anim),i._anim=setInterval(function(){i._pos>i._posTarget&&(i._pos-=(i._pos-i._posTarget)/5,i._pos<=i._posTarget+.01&&(i._pos=i._posTarget)),i._pos<i._posTarget&&(i._pos+=(i._posTarget-i._pos)/5,i._pos>=i._posTarget-.01&&(i._pos=i._posTarget)),i.__update(),i._pos==i._posTarget&&(e&&e(),t(),clearInterval(i._anim),i._anim=0)},5)}),this.$bar.dequeue()},pane:function(t,e){if(t>=0&&2>t){if("undefined"==typeof e)return this._pane[t];if(e)return this._pane[t]=e,e._parent=this,e.__container(this.$pane[t]),this._pane[0]&&this._pane[1]&&this.__update(),e;this._pane[t]&&(this._pane[t].__container(null),this._pane[t]=!1)}return!1},left:function(t){return this.pane(0,t)},right:function(t){return this.pane(1,t)},top:function(t){return this.pane(0,t)},bottom:function(t){return this.pane(1,t)},scrollable:function(t,e,i){return"undefined"!=typeof e&&this.$pane[t].toggleClass("wcScrollableX",e),"undefined"!=typeof i&&this.$pane[t].toggleClass("wcScrollableY",i),{x:this.$pane[t].hasClass("wcScrollableX"),y:this.$pane[t].hasClass("wcScrollableY")}},destroy:function(t){var e=this.docker();if(e){var i=this.docker()._splitterList.indexOf(this);i>-1&&this.docker()._splitterList.splice(i,1)}void 0===t||t?this.__destroy():this.__container(null)},__init:function(){if(this.$pane.push($('<div class="wcLayoutPane wcScrollableX wcScrollableY">')),this.$pane.push($('<div class="wcLayoutPane wcScrollableX wcScrollableY">')),this.$bar=$('<div class="wcSplitterBar">'),this._orientation?this.$bar.addClass("wcTall").addClass("wcSplitterBarV"):this.$bar.addClass("wcWide").addClass("wcSplitterBarH"),this.__container(this.$container),this._parent instanceof wcPanel){this._boundEvents.push({event:e.EVENT.UPDATED,handler:this.__update.bind(this)}),this._boundEvents.push({event:e.EVENT.CLOSED,handler:this.destroy.bind(this)});for(var t=0;t<this._boundEvents.length;++t)this._parent.on(this._boundEvents[t].event,this._boundEvents[t].handler)}},__update:function(t){var i=this.$container.outerWidth(),s=this.$container.outerHeight(),n=this.__minPos(),a=this.__maxPos();if(this._findBestPos){this._findBestPos=!1;var r,o;this._pane[0]&&"function"==typeof this._pane[0].initSize&&(r=this._pane[0].initSize(),r&&(r.x<0&&(r.x=i/2),r.y<0&&(r.y=s/2))),this._pane[1]&&"function"==typeof this._pane[1].initSize&&(o=this._pane[1].initSize(),o&&(o.x<0&&(o.x=i/2),o.y<0&&(o.y=s/2),o.x=i-o.x,o.y=s-o.y));var h;r&&o?h={x:Math.min(r.x,o.x),y:Math.min(r.y,o.y)}:r?h=r:o&&(h=o),h&&(this._orientation?this._pos=h.x/i:this._pos=h.y/s)}if(this.$bar.toggleClass("wcSplitterBarStatic",this.__isStatic()),this._orientation===e.ORIENTATION.HORIZONTAL){var l=this.$bar.outerWidth()/2,c=parseInt(this.$bar.css("border-top-width"))+parseInt(this.$bar.css("border-bottom-width"));if(t){var _=this._pixelPos-(this.$container.offset().left+parseInt(this.$container.css("border-left-width")))-this.$bar.outerWidth()/2;this._pos=_/(i-this.$bar.outerWidth())}this._pos=Math.min(Math.max(this._pos,0),1);var h=(i-this.$bar.outerWidth())*this._pos+l;n&&(h=Math.max(n.x,h)),a&&(h=Math.min(a.x,h));var p=0,d=0;if(this._parent instanceof wcCollapser){var f=this.docker().$container,u=this._parent.$container;p=u.offset().top-f.offset().top,d=f.offset().top+f.outerHeight()-(u.offset().top+u.outerHeight())}this.$bar.css("left",h-l),this.$bar.css("top",p),this.$bar.css("height",s-c-d),this.$pane[0].css("width",h-l),this.$pane[0].css("left","0px"),this.$pane[0].css("right",""),this.$pane[0].css("top",p),this.$pane[0].css("bottom",d),this.$pane[1].css("left",""),this.$pane[1].css("right","0px"),this.$pane[1].css("width",i-h-l-2*parseInt(this.$container.css("border-left-width"))),this.$pane[1].css("top",p),this.$pane[1].css("bottom",d),this._pixelPos=this.$bar.offset().left+l}else{var l=this.$bar.outerHeight()/2,c=parseInt(this.$bar.css("border-left-width"))+parseInt(this.$bar.css("border-right-width"));if(t){var _=this._pixelPos-(this.$container.offset().top+parseInt(this.$container.css("border-top-width")))-this.$bar.outerHeight()/2;this._pos=_/(s-this.$bar.outerHeight())}this._pos=Math.min(Math.max(this._pos,0),1);var h=(s-this.$bar.outerHeight())*this._pos+l;n&&(h=Math.max(n.y,h)),a&&(h=Math.min(a.y,h));var g=0,m=0;if(this._parent instanceof wcCollapser){var f=this.docker().$container,u=this._parent.$container;g=u.offset().left-f.offset().left,m=f.offset().left+f.outerWidth()-(u.offset().left+u.outerWidth())}this.$bar.css("top",h-l),this.$bar.css("left",g),this.$bar.css("width",i-c-d),this.$pane[0].css("height",h-l),this.$pane[0].css("top","0px"),this.$pane[0].css("bottom",""),this.$pane[0].css("left",g),this.$pane[0].css("right",m),this.$pane[1].css("top",""),this.$pane[1].css("bottom","0px"),this.$pane[1].css("height",s-h-l-2*parseInt(this.$container.css("border-top-width"))),this.$pane[1].css("left",g),this.$pane[1].css("right",m),this._pixelPos=this.$bar.offset().top+l}void 0===t&&(t=!0),this._pane[0]&&this._pane[0].__update(t),this._pane[1]&&this._pane[1].__update(t)},__save:function(){if(this._pane[0]&&this._pane[0]instanceof wcCollapser)return this._pane[1].__save();if(this._pane[1]&&this._pane[1]instanceof wcCollapser)return this._pane[0].__save();var t={};return t.type="wcSplitter",t.horizontal=this._orientation,t.isDrawer=this.$bar.hasClass("wcDrawerSplitterBar"),t.pane0=this._pane[0]?this._pane[0].__save():null,t.pane1=this._pane[1]?this._pane[1].__save():null,t.pos=this._pos,t},__restore:function(t,e){this._pos=t.pos,t.isDrawer&&this.$bar.addClass("wcDrawerSplitterBar"),t.pane0&&(this._pane[0]=e.__create(t.pane0,this,this.$pane[0]),this._pane[0].__restore(t.pane0,e)),t.pane1&&(this._pane[1]=e.__create(t.pane1,this,this.$pane[1]),this._pane[1].__restore(t.pane1,e))},__findBestPos:function(){this._findBestPos=!0},__moveBar:function(t){var i=this.$container.offset();if(t.x-=i.left,t.y-=i.top,this._orientation===e.ORIENTATION.HORIZONTAL){var s=this.$container.outerWidth()-this.$bar.outerWidth();t.x+=1-parseInt(this.$container.css("border-left-width"))-this.$bar.outerWidth()/2,this.pos(t.x/s)}else{var n=this.$container.outerHeight()-this.$bar.outerHeight();t.y+=1-parseInt(this.$container.css("border-top-width"))-this.$bar.outerHeight()/2,this.pos(t.y/n)}},__minPos:function(){var t,i=this.$container.outerWidth(),s=this.$container.outerHeight();t=this._pane[0]&&"function"==typeof this._pane[0].minSize?this._pane[0].minSize():{x:50,y:50};var n;if(n=this._pane[1]&&"function"==typeof this._pane[1].maxSize?this._pane[1].maxSize():{x:i,y:s},this._orientation===e.ORIENTATION.HORIZONTAL){var a=this.$bar.outerWidth()/2;t.x+=a,i-=a}else{var a=this.$bar.outerHeight()/2;t.y+=a,s-=a}return n.x=i-Math.min(n.x,i),n.y=s-Math.min(n.y,s),t.x=Math.max(t.x,n.x),t.y=Math.max(t.y,n.y),t},__maxPos:function(){var t,i=this.$container.outerWidth(),s=this.$container.outerHeight();t=this._pane[0]&&"function"==typeof this._pane[0].maxSize?this._pane[0].maxSize():{x:i,y:s};var n;if(n=this._pane[1]&&"function"==typeof this._pane[1].minSize?this._pane[1].minSize():{x:50,y:50},this._orientation===e.ORIENTATION.HORIZONTAL){var a=this.$bar.outerWidth()/2;t.x+=a,i-=a}else{var a=this.$bar.outerHeight()/2;t.y+=a,s-=a}return n.x=i-n.x,n.y=s-n.y,t.x=Math.min(n.x,t.x),t.y=Math.min(n.y,t.y),t},__isStatic:function(){for(var t=this._orientation===e.ORIENTATION.HORIZONTAL?"x":"y",i=0;2>i;++i)if(this._pane[i]&&this._pane[i].minSize&&this._pane[i].maxSize&&this._pane[i].maxSize()[t]-this._pane[i].minSize()[t]===0)return!0;return!1},__container:function(t){return"undefined"==typeof t?this.$container:(this.$container=t,this.$container?(this.$container.append(this.$pane[0]),this.$container.append(this.$pane[1]),this.$container.append(this.$bar)):(this.$pane[0].remove(),this.$pane[1].remove(),this.$bar.remove()),this.$container)},__removeChild:function(t){if(this._pane[0]===t)this._pane[0]=!1;else{if(this._pane[1]!==t)return;this._pane[1]=!1}t&&(t.__container(null),t._parent=null)},__destroy:function(){for(this._anim&&(clearInterval(this._anim),this._anim=0),this.$bar.clearQueue();this._boundEvents.length;)this._parent.off(this._boundEvents[0].event,this._boundEvents[0].handler),this._boundEvents.shift();this._pane[0]&&(this._pane[0].__destroy(),this._pane[0]=null),this._pane[1]&&(this._pane[1].__destroy(),this._pane[1]=null),this.__container(null),this._parent=!1}});return window.wcSplitter=s,s}),i("wcDocker/frame",["dcl/dcl","./types","./base"],function(t,e,i){var s=t(i,{declaredClass:"wcFrame",LEFT_TAB_BUFFER:15,constructor:function(t,i,s){this.$container=$(t),this._parent=i,this._isFloating=s,this.$frame=null,this.$title=null,this.$titleBar=null,this.$tabBar=null,this.$tabScroll=null,this.$center=null,this.$tabLeft=null,this.$tabRight=null,this.$close=null,this.$collapse=null,this.$top=null,this.$bottom=null,this.$left=null,this.$right=null,this.$corner1=null,this.$corner2=null,this.$corner3=null,this.$corner4=null,this.$buttonBar=null,this.$shadower=null,this.$modalBlocker=null,this._titleVisible=!0,this._canScrollTabs=!1,this._tabOrientation=e.TAB.TOP,this._tabScrollPos=0,this._curTab=-1,this._panelList=[],this._buttonList=[],this._resizeData={time:-1,timeout:!1,delta:150},this._pos={x:.5,y:.5},this._size={x:400,y:400},this._lastSize={x:400,y:400},this._anchorMouse={x:0,y:0},this.__init()},pos:function(t,e,i){var s=this.$container.width(),n=this.$container.height();return"undefined"==typeof t?i?{x:this._pos.x*s,y:this._pos.y*n}:{x:this._pos.x,y:this._pos.y}:void(i?(this._pos.x=t/s,this._pos.y=e/n):(this._pos.x=t,this._pos.y=e))},initSize:function(){for(var t={x:-1,y:-1},e=0;e<this._panelList.length;++e)t.x<this._panelList[e].initSize().x&&(t.x=this._panelList[e].initSize().x),t.y<this._panelList[e].initSize().y&&(t.y=this._panelList[e].initSize().y);return t.x<0||t.y<0?!1:t},minSize:function(){for(var t={x:0,y:0},e=0;e<this._panelList.length;++e)t.x=Math.max(t.x,this._panelList[e].minSize().x),t.y=Math.max(t.y,this._panelList[e].minSize().y);return t},maxSize:function(){for(var t={x:1/0,y:1/0},e=0;e<this._panelList.length;++e)t.x=Math.min(t.x,this._panelList[e].maxSize().x),t.y=Math.min(t.y,this._panelList[e].maxSize().y);return t},tabOrientation:function(t){return void 0!==t&&this._tabOrientation!==t&&this.docker()._canOrientTabs&&(this._tabOrientation=t,this.__updateTabs(),this.__updateTabs()),this._tabOrientation},addPanel:function(t,e){var i=this._panelList.indexOf(t);-1!==i&&this._panelList.splice(i,1),"undefined"==typeof e?this._panelList.push(t):this._panelList.splice(e,0,t),-1===this._curTab&&this._panelList.length&&(this.isCollapser()||(this._curTab=0),this._size=this.initSize()),this.__updateTabs()},removePanel:function(t){for(var e=0;e<this._panelList.length;++e)if(this._panelList[e]===t){this.isCollapser()?this._curTab=-1:this._curTab>=e&&this._curTab--,this._panelList[e]._parent===this&&(this._panelList[e].__container(null),this._panelList[e]._parent=null),this._panelList.splice(e,1),t._isVisible=!1;break}return-1===this._curTab&&!this.collapse()&&this._panelList.length&&(this._curTab=0),this.__updateTabs(),this._panelList.length>0},panel:function(t,e){return"undefined"!=typeof t&&(this.isCollapser()&&t===this._curTab&&(this.collapse(),t=-1),t<this._panelList.length&&(this.$tabBar.find('> .wcTabScroller > .wcPanelTab[id="'+this._curTab+'"]').removeClass("wcPanelTabActive"),this.$center.children('.wcPanelTabContent[id="'+this._curTab+'"]').addClass("wcPanelTabContentHidden"),this._curTab!==t&&this.collapse(),this._curTab=t,t>-1&&(this.$tabBar.find('> .wcTabScroller > .wcPanelTab[id="'+t+'"]').addClass("wcPanelTabActive"),this.$center.children('.wcPanelTabContent[id="'+t+'"]').removeClass("wcPanelTabContentHidden"),this.expand()),this.__updateTabs(e))),this._curTab>-1&&this._curTab<this._panelList.length?this._panelList[this._curTab]:this.isCollapser()&&this._panelList.length?this._panelList[0]:!1},isCollapser:function(){return this._parent instanceof wcDrawer},collapse:function(t){return this.isCollapser()?(this._parent.collapse(t),!0):!1},expand:function(){return this.isCollapser()?(this._parent.expand(),!0):!1},isExpanded:function(){return this.isCollapser()?this._parent.isExpanded():void 0},__init:function(){this.$frame=$('<div class="wcFrame wcWide wcTall">'),this.$title=$('<div class="wcFrameTitle">'),this.$titleBar=$('<div class="wcFrameTitleBar wcFrameTopper">'),this.$tabBar=$('<div class="wcFrameTitleBar">'),this.$tabScroll=$('<div class="wcTabScroller">'),this.$center=$('<div class="wcFrameCenter wcPanelBackground">'),this.$tabLeft=$('<div class="wcFrameButton" title="Scroll tabs to the left."><span class="fa fa-arrow-left"></span>&lt;</div>'),this.$tabRight=$('<div class="wcFrameButton" title="Scroll tabs to the right."><span class="fa fa-arrow-right"></span>&gt;</div>'),this.$close=$('<div class="wcFrameButton" title="Close the currently active panel tab"><div class="fa fa-close"></div>X</div>'),this.$collapse=$('<div class="wcFrameButton" title="Collapse the active panel"><div class="fa fa-download"></div>C</div>'),this.$buttonBar=$('<div class="wcFrameButtonBar">'),this.$tabButtonBar=$('<div class="wcFrameButtonBar">'),this.$tabBar.append(this.$tabScroll),this.$tabBar.append(this.$tabButtonBar),this.$frame.append(this.$buttonBar),this.$buttonBar.append(this.$close),this.$buttonBar.append(this.$collapse),this.$frame.append(this.$center),this._isFloating&&(this.$top=$('<div class="wcFrameEdgeH wcFrameEdge"></div>').css("top","-6px").css("left","0px").css("right","0px"),this.$bottom=$('<div class="wcFrameEdgeH wcFrameEdge"></div>').css("bottom","-6px").css("left","0px").css("right","0px"),this.$left=$('<div class="wcFrameEdgeV wcFrameEdge"></div>').css("left","-6px").css("top","0px").css("bottom","0px"),this.$right=$('<div class="wcFrameEdgeV wcFrameEdge"></div>').css("right","-6px").css("top","0px").css("bottom","0px"),this.$corner1=$('<div class="wcFrameCornerNW wcFrameEdge"></div>').css("top","-6px").css("left","-6px"),this.$corner2=$('<div class="wcFrameCornerNE wcFrameEdge"></div>').css("top","-6px").css("right","-6px"),this.$corner3=$('<div class="wcFrameCornerNW wcFrameEdge"></div>').css("bottom","-6px").css("right","-6px"),this.$corner4=$('<div class="wcFrameCornerNE wcFrameEdge"></div>').css("bottom","-6px").css("left","-6px"),this.$frame.append(this.$top),this.$frame.append(this.$bottom),this.$frame.append(this.$left),this.$frame.append(this.$right),this.$frame.append(this.$corner1),this.$frame.append(this.$corner2),this.$frame.append(this.$corner3),this.$frame.append(this.$corner4)),this.__container(this.$container),this._isFloating&&this.$frame.addClass("wcFloating"),this.$center.scroll(this.__scrolled.bind(this))},__update:function(){var t=this.$container.width(),e=this.$container.height();if(this._isFloating){var i=this._pos.x*t-this._size.x/2,s=this._pos.y*e-this._size.y/2;0>s&&(s=0),i+this._size.x/2<0&&(i=-this._size.x/2),i+this._size.x/2>t&&(i=t-this._size.x/2),s+parseInt(this.$center.css("top"))>e&&(s=e-parseInt(this.$center.css("top"))),this.$frame.css("left",i+"px"),this.$frame.css("top",s+"px"),this.$frame.css("width",this._size.x+"px"),this.$frame.css("height",this._size.y+"px")}(t!==this._lastSize.x||e!==this._lastSize.y)&&(this._lastSize.x=t,this._lastSize.y=e,this._resizeData.time=new Date,this._resizeData.timeout||(this._resizeData.timeout=!0,setTimeout(this.__resizeEnd.bind(this),this._resizeData.delta))),this.__onTabChange()},__resizeEnd:function(){this.__updateTabs(),new Date-this._resizeData.time<this._resizeData.delta?setTimeout(this.__resizeEnd.bind(this),this._resizeData.delta):this._resizeData.timeout=!1},__trigger:function(t,e){for(var i=0;i<this._panelList.length;++i)this._panelList[i].__trigger(t,e)},__save:function(){var t={};t.type="wcFrame",t.floating=this._isFloating,t.isFocus=this.$frame.hasClass("wcFloatingFocus"),t.tabOrientation=this._tabOrientation,t.pos={x:this._pos.x,y:this._pos.y},t.size={x:this._size.x,y:this._size.y},t.tab=this._curTab,t.panels=[];for(var e=0;e<this._panelList.length;++e)t.panels.push(this._panelList[e].__save());return t},__restore:function(t,i){this._isFloating=t.floating,this._tabOrientation=t.tabOrientation||e.TAB.TOP,this._pos.x=t.pos.x,this._pos.y=t.pos.y,this._size.x=t.size.x,this._size.y=t.size.y,this._curTab=t.tab;for(var s=0;s<t.panels.length;++s){var n=i.__create(t.panels[s],this,this.$center);n.__restore(t.panels[s],i),this._panelList.push(n)}this.__update(),t.isFocus&&this.$frame.addClass("wcFloatingFocus")},__updateTabs:function(t){this.$tabScroll.empty();var i=function(t){switch(this._tabOrientation){case e.TAB.BOTTOM:return t.offset().left;case e.TAB.TOP:return t.offset().left;case e.TAB.LEFT:return t.offset().top;case e.TAB.RIGHT:return t.offset().top}}.bind(this),s=[],n=[],a=0,r=i(this.$tabScroll),o=this._panelList.length>1||this._isFloating||this.isCollapser();this.isCollapser()?this.$tabBar.addClass("wcNotMoveable"):(this.$titleBar.removeClass("wcNotMoveable"),this.$tabBar.removeClass("wcNotMoveable")),this.$center.children(".wcPanelTabContent").each(function(){$(this).addClass("wcPanelTabContentHidden wcPanelTabUnused")}),this._titleVisible=!0,this.$title.html("");for(var h=0;h<this._panelList.length;++h){var l=this._panelList[h],c=null;o&&(c=l.$title,l.$title.attr("id",h),this.$tabScroll.append(l.$title)),l.moveable()||(this.$titleBar.addClass("wcNotMoveable"),this.$tabBar.addClass("wcNotMoveable")),l._titleVisible||(this._titleVisible=!1);var _=this.$center.children('.wcPanelTabContent[id="'+h+'"]');_.length||(_=$('<div class="wcPanelTabContent wcPanelTabContentHidden" id="'+h+'">'),this.$center.append(_)),l.__container(_),l._parent=this;var p=this._curTab===h;if(l.isVisible()!==p&&s.push({panel:l,isVisible:p}),_.removeClass("wcPanelTabUnused"),p&&(c&&c.addClass("wcPanelTabActive"),_.removeClass("wcPanelTabContentHidden"),this.$title.html(l.title()),l.$icon)){var d=l.$icon.clone();this.$title.prepend(d)}c&&(a=i(c)-r,n.push(a),a+=c.outerWidth())}var f=this.$titleBar,u=0;if(this._titleVisible){switch(this.$frame.parent()||this.$center.css("top",""),this._tabOrientation){case e.TAB.TOP:this.$frame.prepend(this.$tabBar),this.$titleBar.remove(),this.$tabBar.addClass("wcTabTop").removeClass("wcTabLeft wcTabRight wcTabBottom"),o?this.$title.remove():this.$tabBar.prepend(this.$title),f=this.$tabBar,this.$center.css("left",0).css("right",0).css("bottom",0),u=this.$center.width();break;case e.TAB.BOTTOM:if(this.$frame.prepend(this.$titleBar),this.$titleBar.append(this.$title),o){var g=this.$titleBar.height();this.$frame.append(this.$tabBar),this.$tabBar.addClass("wcTabBottom").removeClass("wcTabTop wcTabLeft wcTabRight"),this.$center.css("left",0).css("right",0).css("bottom",g)}else this.$tabBar.remove();u=this.$center.width();break;case e.TAB.LEFT:if(this.$frame.prepend(this.$titleBar),this.$titleBar.append(this.$title),o){var g=this.$titleBar.height();this.$frame.append(this.$tabBar),this.$tabBar.addClass("wcTabLeft").removeClass("wcTabTop wcTabRight wcTabBottom"),this.$center.css("left",g).css("right",0).css("bottom",0)}else this.$tabBar.remove();u=this.$center.height();break;case e.TAB.RIGHT:if(this.$frame.prepend(this.$titleBar),this.$titleBar.append(this.$title),o){var g=this.$titleBar.height();this.$frame.append(this.$tabBar),this.$tabBar.addClass("wcTabRight").removeClass("wcTabTop wcTabLeft wcTabBottom"),this.$center.css("left",0).css("right",g).css("bottom",0)}else this.$tabBar.remove();u=this.$center.height()}o||this.$center.css("left",0).css("right",0).css("bottom",0)}else this.$titleBar.remove(),this.$tabBar.remove(),this.$center.css("top",0).css("left",0).css("right",0).css("bottom",0);if(this.$center.children(".wcPanelTabUnused").each(function(){$(this).remove()}),this._titleVisible){var m=this.__onTabChange();if(t)for(var h=0;h<n.length;++h)if(h===this._curTab){var b=n[h],v=a;h+1<n.length&&(v=n[h+1]);var T=-parseInt(this.$tabScroll.css("left")),w=u-m;T>b?(this._tabScrollPos=b-this.LEFT_TAB_BUFFER,this._tabScrollPos<0&&(this._tabScrollPos=0)):v-T>w&&(this._tabScrollPos=v-w+this.LEFT_TAB_BUFFER);break}if(this._canScrollTabs=!1,a>u-m){this._canScrollTabs=this._titleVisible,this._canScrollTabs&&(this.$tabButtonBar.append(this.$tabRight),this.$tabButtonBar.append(this.$tabLeft),m+=this.$tabRight.outerWidth(),m+=this.$tabLeft.outerWidth());var y=a-(u-m)/2;if(this._tabScrollPos>y)for(var x=this.$tabScroll.children(),h=0;h<x.length;++h){var c=$(x[h]);if(a=i(c)-r,a+c.outerWidth()>y){this._tabScrollPos=a-this.LEFT_TAB_BUFFER,this._tabScrollPos<0&&(this._tabScrollPos=0);break}}}else this._tabScrollPos=0,this.$tabLeft.remove(),this.$tabRight.remove();this.$tabScroll.stop().animate({left:-this._tabScrollPos+"px"},"fast");for(var h=0;h<s.length;++h)s[h].panel.__isVisible(s[h].isVisible)}},__onTabChange:function(){var t=0,i=0,s=this.panel();for(this.$tabLeft.remove(),this.$tabRight.remove(),this.$close.hide(),this.$collapse.hide();this._buttonList.length;)this._buttonList.pop().remove();if(s){var n=s.scrollable();if(this.$center.toggleClass("wcScrollableX",n.x),this.$center.toggleClass("wcScrollableY",n.y),this.$frame.toggleClass("wcOverflowVisible",s.overflowVisible()),this.$center.toggleClass("wcOverflowVisible",s.overflowVisible()),!this.isCollapser()||this.isExpanded()){s.closeable()&&(this.$close.show(),t+=this.$close.outerWidth());var a=this.docker();if(a.isCollapseEnabled()&&s.moveable()&&s.collapsible()&&!this._isFloating&&!s._isPlaceholder)if(this.isCollapser()){var r=this.$collapse.children("div");switch(r[0].className="fa fa-sign-out",this._parent._position){case e.DOCK.LEFT:r.addClass("wcCollapseLeft");break;case e.DOCK.RIGHT:r.addClass("wcCollapseRight");break;case e.DOCK.BOTTOM:r.addClass("wcCollapseBottom")}r.addClass("wcCollapsed"),this.$collapse.show(),this.$collapse.attr("title","Dock this collapsed panel back into the main layout."),t+=this.$collapse.outerWidth()}else{var o=e.DOCK.BOTTOM;if(s._collapseDirection===e.DOCK.LEFT||s._collapseDirection===e.DOCK.RIGHT||s._collapseDirection===e.DOCK.BOTTOM)o=s._collapseDirection;else{var h=a.$container;!$.isEmptyObject(a._collapser)&&a._collapser.hasOwnProperty(e.DOCK.RIGHT)&&(h=a._collapser[e.DOCK.RIGHT]._parent.$pane[0]);var l=h.offset(),c=this.$container.offset();c.right=(c.left+this.$container.width()-l.left)/h.width(),c.bottom=(c.top+this.$container.height()-l.top)/h.height(),c.top=(c.top-l.top)/h.height(),c.left=(c.left-l.left)/h.width(),"function"==typeof s._collapseDirection?o=s._collapseDirection(c):c.top>.5&&c.bottom>.95?o=e.DOCK.BOTTOM:c.left<=.05?o=e.DOCK.LEFT:c.right>=.95?o=e.DOCK.RIGHT:c.bottom>.95&&(o=e.DOCK.BOTTOM)}var _="",p="";switch(o){case e.DOCK.LEFT:_="left side.",p="wcCollapseLeft";break;case e.DOCK.RIGHT:_="right side.",p="wcCollapseRight";break;case e.DOCK.BOTTOM:_="bottom.",p="wcCollapseBottom"}if(_){var r=this.$collapse.children("div");r[0].className="fa fa-sign-in",r.addClass(p),r.addClass("wcCollapsible"),this.$collapse.show(),this.$collapse.attr("title","Collapse this panel into the "+_),t+=this.$collapse.outerWidth()}}for(var d=0;d<s._buttonList.length;++d){var f=s._buttonList[d],u=$("<div>"),g=f.className;u.addClass("wcFrameButton"),f.isTogglable&&(u.addClass("wcFrameButtonToggler"),f.isToggled&&(u.addClass("wcFrameButtonToggled"),g=f.toggleClassName||g)),u.attr("title",f.tip),u.data("name",f.name),u.text(f.text),g&&u.prepend($('<div class="'+g+'">')),this._buttonList.push(u),this.$buttonBar.append(u),t+=u.outerWidth()}}if(this._canScrollTabs&&(this.$tabButtonBar.append(this.$tabRight),this.$tabButtonBar.append(this.$tabLeft),i+=this.$tabRight.outerWidth()+this.$tabLeft.outerWidth()),this._titleVisible)switch(this.$buttonBar.css("right",""),this._tabOrientation){case e.TAB.RIGHT:this.$buttonBar.css("right",this.$tabBar.height());case e.TAB.LEFT:this.$tabBar.css("width",this.$center.height()+this.$tabBar.height());break;case e.TAB.TOP:case e.TAB.BOTTOM:this.$tabBar.css("width",this.$center.width())}s.__update(),this.$center.scrollLeft(s._scroll.x),this.$center.scrollTop(s._scroll.y)}return this.$buttonBar.css("min-width",t).css("width",t),this.$tabButtonBar.css("min-width",i).css("width",i),this._tabOrientation===e.TAB.TOP?(this.$tabButtonBar.css("right",t),t+i):(this.$tabButtonBar.css("right",0),i)},__scrolled:function(){var t=this.panel();t._scroll.x=this.$center.scrollLeft(),t._scroll.y=this.$center.scrollTop(),t.__trigger(e.EVENT.SCROLLED)},__focus:function(t){if(t){var e=$('<div class="wcFrameFlasher">');this.$frame.append(e),e.animate({opacity:1},100).animate({opacity:0},100).animate({opacity:.6},50).animate({opacity:0},50).queue(function(t){e.remove(),t()})}},__move:function(t){var e=this.$container.width(),i=this.$container.height();this._pos.x=(t.x+this._anchorMouse.x)/e,this._pos.y=(t.y+this._anchorMouse.y)/i},__anchorMove:function(t){var e=this.$container.width(),i=this.$container.height();this._anchorMouse.x=this._pos.x*e-t.x,this._anchorMouse.y=this._pos.y*i-t.y},__tabMove:function(t,e){if(t>=0&&t<this._panelList.length&&e>=0&&e<this._panelList.length){var i=this._panelList.splice(t,1);return this._panelList.splice(e,0,i[0]),this._curTab===t&&(this._curTab=e),this.__updateTabs(),this.$tabBar.find('> .wcTabScroller > .wcPanelTab[id="'+e+'"]')[0]}return!1},__checkAnchorDrop:function(t,e,i,s,n,a){var r=this.panel();return r&&r.moveable()?r.layout().__checkAnchorDrop(t,e&&this._tabOrientation,i,!this._isFloating&&!this.isCollapser()&&s,this.$frame,r.moveable()&&r.title(),n,this.isCollapser()?this._tabOrientation:void 0,a):!1},__resize:function(t,e){var i=this.$container.width(),s=this.$container.height(),n=this.$container.offset();e.x-=n.left,e.y-=n.top;for(var a=this.minSize(),r=this.maxSize(),o={x:this._pos.x*i-this._size.x/2,y:this._pos.y*s-this._size.y/2},h=0;h<t.length;++h){switch(t[h]){case"top":this._size.y+=o.y-e.y-2,o.y=e.y+2,this._size.y<a.y&&(o.y+=this._size.y-a.y,this._size.y=a.y),this._size.y>r.y&&(o.y+=this._size.y-r.y,this._size.y=r.y);break;case"bottom":this._size.y=e.y-4-o.y,this._size.y<a.y&&(this._size.y=a.y),this._size.y>r.y&&(this._size.y=r.y);break;case"left":this._size.x+=o.x-e.x-2,o.x=e.x+2,this._size.x<a.x&&(o.x+=this._size.x-a.x,this._size.x=a.x),this._size.x>r.x&&(o.x+=this._size.x-r.x,this._size.x=r.x);break;case"right":this._size.x=e.x-4-o.x,this._size.x<a.x&&(this._size.x=a.x),this._size.x>r.x&&(this._size.x=r.x)}this._pos.x=(o.x+this._size.x/2)/i,this._pos.y=(o.y+this._size.y/2)/s}},__shadow:function(t){if(t)this.$shadower||(this.$shadower=$('<div class="wcFrameShadower">'),this.$frame.append(this.$shadower),this.$shadower.animate({opacity:.5},300));else if(this.$shadower){var e=this;this.$shadower.animate({opacity:0},300).queue(function(t){e.$shadower.remove(),e.$shadower=null,t()})}},__rect:function(){if(this.isCollapser())return this._parent.__rect();var t=this.$frame.offset(),e=this.$frame.width(),i=this.$frame.height();return{x:t.left,y:t.top,w:e,h:i}},__container:function(t){return"undefined"==typeof t?this.$container:(this.$container=t,this.$container?this.$container.append(this.$frame):this.$frame.remove(),this.$container)},__destroy:function(){this._curTab=-1;for(var t=0;t<this._panelList.length;++t)this._panelList[t].__destroy();for(;this._panelList.length;)this._panelList.pop();this.$modalBlocker&&(this.$modalBlocker.remove(),this.$modalBlocker=null),this.__container(null),this._parent=null}});return window.wcFrame=s,s}),i("wcDocker/collapser",["dcl/dcl","./types","./base"],function(t,e,i){var s=t(i,{declaredClass:"wcCollapser",constructor:function(t,i,s){this.$container=$(t),this.$frame=null,this._position=s,this._parent=i,this._splitter=null,this._drawer=null,this._size=0,this._orientation=this._position===e.DOCK.LEFT||this._position===e.DOCK.RIGHT?e.ORIENTATION.HORIZONTAL:e.ORIENTATION.VERTICAL,this.__init()},collapse:function(t){this._drawer.collapse()},expand:function(){this._drawer.expand()},isExpanded:function(){return this._drawer.isExpanded()},minSize:function(){return{x:this._size,y:this._size}},maxSize:function(){var t=this._orientation===e.ORIENTATION.HORIZONTAL?!0:!1;return{x:t?this._size:1/0,y:t?1/0:this._size}},__init:function(){this.$frame=$('<div class="wcCollapserFrame">'),this.__container(this.$container);var t=this.docker();switch(this._splitter=new wcSplitter(t.$container,this,this._orientation),this._drawer=new wcDrawer(t.$transition,this._splitter,this._position),this._position){case e.DOCK.LEFT:this._splitter.pane(0,this._drawer),this._splitter.$pane[1].remove(),this._splitter.$pane[0].addClass("wcDrawer"),this._splitter.pos(0);break;case e.DOCK.RIGHT:case e.DOCK.BOTTOM:this._splitter.pane(1,this._drawer),this._splitter.$pane[0].remove(),this._splitter.$pane[1].addClass("wcDrawer"),this._splitter.pos(1)}this._parent.$bar.addClass("wcSplitterHidden")},__update:function(t){this._splitter.__update(),this.__adjustSize()},__adjustSize:function(){this._drawer._frame._panelList.length?this._size=this._drawer._frame.$tabBar.outerHeight():this._size=0},__rect:function(){return this._drawer.__rect()},__save:function(){var t={};return t.size=this._size,t.drawer=this._drawer.__save(),t},__restore:function(t,e){this._size=t.size,this._drawer.__restore(t.drawer,e),this.__adjustSize()},__container:function(t){return"undefined"==typeof t?this.$container:(this.$container=t,this.$container?this.$container.append(this.$frame):this.$frame.remove(),this.$container)},__destroy:function(){this._splitter&&(this._splitter.__destroy(),this._splitter=null,this._frame=null),this.__container(null),this._parent=null}});return window.wcCollapser=s,s}),i("wcDocker/drawer",["dcl/dcl","./types","./frame","./base"],function(t,e,i,s){var n=t(s,{declaredClass:"wcCollapser",constructor:function(t,i,s){this.$container=$(t),this.$frame=null,this._position=s,
this._parent=i,this._frame=null,this._closeSize=0,this._expanded=!1,this._sliding=!1,this._orientation=this._position===e.DOCK.LEFT||this._position===e.DOCK.RIGHT?e.ORIENTATION.HORIZONTAL:e.ORIENTATION.VERTICAL,this.__init()},collapse:function(t){if(this._expanded){var i=this._frame.panel();if(i){var s=this._parent.pos();this._position!==e.DOCK.LEFT&&(s=1-s);var n;this._position===e.DOCK.BOTTOM?(n=this.docker().$container.height(),i._size.y=s*n):(n=this.docker().$container.width(),i._size.x=s*n)}if(this._expanded=!1,t)switch(this._position){case e.DOCK.TOP:case e.DOCK.LEFT:this._parent.pos(0);break;case e.DOCK.RIGHT:case e.DOCK.BOTTOM:this._parent.pos(1)}else{this._sliding=!0;var a=this,r=function(){a._sliding=!1,a._parent.__update()};switch(this._position){case e.DOCK.TOP:case e.DOCK.LEFT:this._parent.animPos(0,r);break;case e.DOCK.RIGHT:case e.DOCK.BOTTOM:this._parent.animPos(1,r)}}}},expand:function(){if(!this._expanded){this._expanded=!0,this._sliding=!0;var t=this._frame.panel();if(t){var i,s;this._position===e.DOCK.BOTTOM?(i=t._size.y,s=this.docker().$container.height()):(i=t._size.x,s=this.docker().$container.width()),this._position!==e.DOCK.LEFT&&(i=s-i),i/=s;var n=this;this._parent.animPos(i,function(){n._sliding=!1,n._parent.__update()})}}},isExpanded:function(){return this._expanded},minSize:function(){return this._expanded?this._root&&"function"==typeof this._root.minSize?this._root.minSize():{x:100,y:100}:(this.__adjustCollapsedSize(),{x:this._closeSize,y:this._closeSize})},maxSize:function(){var t=this._orientation===e.ORIENTATION.HORIZONTAL?!0:!1;return this._expanded||this._sliding?this._root&&"function"==typeof this._root.maxSize?{x:t?this._root.maxSize().x:1/0,y:t?1/0:this._root.maxSize().y}:{x:1/0,y:1/0}:(this.__adjustCollapsedSize(),{x:t?this._closeSize:1/0,y:t?1/0:this._closeSize})},__init:function(){this.$frame=$('<div class="wcCollapserFrame">'),this.__container(this.$container),this._frame=new i(this.$frame,this,!1),this._frame.tabOrientation(this._position)},__update:function(t){this.__adjustCollapsedSize(),this._frame.__update()},__adjustCollapsedSize:function(){this._frame._panelList.length?(this._closeSize=this._frame.$tabBar.outerHeight(),this._parent.$bar.removeClass("wcSplitterHidden")):(this._closeSize=0,this._parent.$bar.addClass("wcSplitterHidden"))},__rect:function(){var t=this.$frame.offset(),i=this.$frame.width(),s=this.$frame.height(),n=this._frame.panel();return n&&(this._position===e.DOCK.BOTTOM?(s=n._size.y,i/=3):(i=n._size.x,s/=3)),{x:t.left,y:t.top,w:i,h:s}},__save:function(){var t={};return t.closeSize=this._closeSize,t.frame=this._frame.__save(),t},__restore:function(t,e){this._closeSize=t.closeSize,this._frame.__restore(t.frame,e),this.__adjustCollapsedSize()},__container:function(t){return"undefined"==typeof t?this.$container:(this.$container=t,this.$container?this.$container.append(this.$frame):this.$frame.remove(),this.$container)},__destroy:function(){this._frame&&(this._frame.__destroy(),this._frame=null),this.__container(null),this._parent=null}});return window.wcDrawer=n,n}),i("wcDocker/iframe",["dcl/dcl","./types","./base"],function(t,e,i){var s=t(i,{declaredClass:"wcIFrame",constructor:function(t,e){this._panel=e,this._layout=e.layout(),this.$container=$(t),this.$frame=null,this.$focus=null,this.$iFrame=null,this._window=null,this._isDocking=!1,this._isHovering=!1,this._boundEvents=[],this._onLoadFuncs=[],this.__init()},openURL:function(t){this.__clearFrame(),this.$iFrame=$("<iframe>iFrames not supported on your device!</iframe>"),this.$frame.prepend(this.$iFrame),this.__onMoved(),this._window=this.$iFrame[0].contentWindow||this.$iFrame[0],this.__updateFrame(),this._window.location.replace(t),this.$iFrame[0].focus(),this.$iFrame.hover(this.__onHoverEnter.bind(this),this.__onHoverExit.bind(this));var e=this;this.$iFrame.load(function(){for(var t=0;t<e._onLoadFuncs.length;++t)e._onLoadFuncs[t]();e._onLoadFuncs=[]})},openHTML:function(t){this.__clearFrame(),this.$iFrame=$("<iframe>iFrames not supported on your device!</iframe>"),this.$frame.prepend(this.$iFrame),this.__onMoved(),this._window=this.$iFrame[0].contentWindow||this.$iFrame[0],this.__updateFrame(),this._window.document.open(),this._window.document.write(t),this._window.document.close(),this.$iFrame[0].focus(),this.$iFrame.hover(this.__onHoverEnter.bind(this),this.__onHoverExit.bind(this));var e=this;this.$iFrame.load(function(){for(var t=0;t<e._onLoadFuncs.length;++t)e._onLoadFuncs[t]();e._onLoadFuncs=[]})},openSRC:function(t){this.__clearFrame(),this.$iFrame=$("<iframe>iFrames not supported on your device!</iframe>"),this.$frame.prepend(this.$iFrame),this.__onMoved(),this._window=this.$iFrame[0].contentWindow||this.$iFrame[0],this.__updateFrame(),this.$iFrame[0].srcdoc=t,this.$iFrame[0].focus(),this.$iFrame.hover(this.__onHoverEnter.bind(this),this.__onHoverExit.bind(this));var e=this;this.$iFrame.load(function(){for(var t=0;t<e._onLoadFuncs.length;++t)e._onLoadFuncs[t]();e._onLoadFuncs=[]})},onLoaded:function(t){this._onLoadFuncs.push(t)},show:function(){this.$frame&&this.$frame.removeClass("wcIFrameHidden")},hide:function(){this.$frame&&this.$frame.addClass("wcIFrameHidden")},window:function(){return this._window},destroy:function(){for(;this._boundEvents.length;)this._panel.off(this._boundEvents[0].event,this._boundEvents[0].handler),this._boundEvents.shift();this.__clearFrame(),this._panel=null,this._layout=null,this.$container=null,this.$frame.remove(),this.$frame=null,this.$focus=null},__init:function(){this.$frame=$('<div class="wcIFrame">'),this.$focus=$('<div class="wcIFrameFocus">'),this._panel.docker().$container.append(this.$frame),this.$frame.append(this.$focus),this._boundEvents.push({event:e.EVENT.VISIBILITY_CHANGED,handler:this.__onVisibilityChanged.bind(this)}),this._boundEvents.push({event:e.EVENT.BEGIN_DOCK,handler:this.__onBeginDock.bind(this)}),this._boundEvents.push({event:e.EVENT.END_DOCK,handler:this.__onEndDock.bind(this)}),this._boundEvents.push({event:e.EVENT.MOVE_STARTED,handler:this.__onMoveStarted.bind(this)}),this._boundEvents.push({event:e.EVENT.RESIZE_STARTED,handler:this.__onMoveStarted.bind(this)}),this._boundEvents.push({event:e.EVENT.MOVE_ENDED,handler:this.__onMoveFinished.bind(this)}),this._boundEvents.push({event:e.EVENT.RESIZE_ENDED,handler:this.__onMoveFinished.bind(this)}),this._boundEvents.push({event:e.EVENT.MOVED,handler:this.__onMoved.bind(this)}),this._boundEvents.push({event:e.EVENT.RESIZED,handler:this.__onMoved.bind(this)}),this._boundEvents.push({event:e.EVENT.ATTACHED,handler:this.__updateFrame.bind(this)}),this._boundEvents.push({event:e.EVENT.DETACHED,handler:this.__updateFrame.bind(this)}),this._boundEvents.push({event:e.EVENT.GAIN_FOCUS,handler:this.__updateFrame.bind(this)}),this._boundEvents.push({event:e.EVENT.LOST_FOCUS,handler:this.__updateFrame.bind(this)}),this._boundEvents.push({event:e.EVENT.PERSISTENT_OPENED,handler:this.__updateFrame.bind(this)}),this._boundEvents.push({event:e.EVENT.PERSISTENT_CLOSED,handler:this.__updateFrame.bind(this)}),this._boundEvents.push({event:e.EVENT.CLOSED,handler:this.__onClosed.bind(this)});for(var t=0;t<this._boundEvents.length;++t)this._panel.on(this._boundEvents[t].event,this._boundEvents[t].handler);$(window).blur(this.__onBlur.bind(this))},__clearFrame:function(){this.$iFrame&&(this.$iFrame[0].srcdoc="",this.$iFrame.remove(),this.$iFrame=null,this._window=null)},__updateFrame:function(){if(this.$frame&&this._panel){var t=this._panel.isFloating();this.$frame.toggleClass("wcIFrameFloating",t),t?this.$frame.toggleClass("wcIFrameFloatingFocus",focus):this.$frame.removeClass("wcIFrameFloatingFocus"),this.$frame.toggleClass("wcIFramePanelHidden",!this._panel.isVisible()),this._panel._parent instanceof wcFrame&&this.$frame.toggleClass("wcDrawer",this._panel._parent.isCollapser())}},__focusFix:function(){this.$frame.css("left",parseInt(this.$frame.css("left"))+1),this.$frame.css("left",parseInt(this.$frame.css("left"))-1)},__onHoverEnter:function(){this._isHovering=!0},__onHoverExit:function(){this._isHovering=!1},__onBlur:function(){this._isHovering&&this.__onFocus()},__onFocus:function(){this.docker(this._panel).__focus(this._panel._parent)},__onVisibilityChanged:function(){this.__updateFrame()},__onBeginDock:function(){this.$frame&&(this._isDocking=!0,this.$frame.addClass("wcIFrameMoving"))},__onEndDock:function(){this.$frame&&(this._isDocking=!1,this.$frame.removeClass("wcIFrameMoving"),this.__focusFix())},__onMoveStarted:function(){this.$frame&&!this._isDocking&&this.$frame.addClass("wcIFrameMoving")},__onMoveFinished:function(){this.$frame&&!this._isDocking&&(this.$frame.removeClass("wcIFrameMoving"),this.__focusFix())},__onMoved:function(){if(this.$frame&&this._panel){var t=this.docker(this._panel);if(t){var e=t.$container.offset(),i=this.$container.offset(),s=this.$container.width(),n=this.$container.height();this.$frame.css("top",i.top-e.top),this.$frame.css("left",i.left-e.left),this.$frame.css("width",s),this.$frame.css("height",n)}else console.error("have no docker")}},__onClosed:function(){this.destroy()}});return window.wcIFrame=s,s}),i("wcDocker/docker",["dcl/dcl","./types","./panel","./ghost","./splitter","./frame","./collapser","./drawer","./iframe","./base"],function(t,e,i,s,n,a,r,o,h,l){var c=t(l,{DOCK:{MODAL:"modal",FLOAT:"float",TOP:"top",LEFT:"left",RIGHT:"right",BOTTOM:"bottom",STACKED:"stacked"},constructor:function(t,e){this.declaredClass="wcDocker",this.$outer=$(t),this.$container=$('<div class="wcDocker">'),this.$transition=$('<div class="wcDockerTransition">'),this.$loading=null,this.$outer.append(this.$container),this.$container.append(this.$transition),this._canOrientTabs=!0,this._events={},this._root=null,this._frameList=[],this._floatingList=[],this._modalList=[],this._persistentList=[],this._focusFrame=null,this._placeholderPanel=null,this._contextTimer=0,this._dirty=!1,this._splitterList=[],this._tabList=[],this._collapser={},this._dockPanelTypeList=[],this._creatingPanel=!1,this._draggingSplitter=null,this._draggingFrame=null,this._draggingFrameSizer=null,this._draggingFrameTab=null,this._draggingFrameTopper=!1,this._draggingCustomTabFrame=null,this._ghost=null,this._menuTimer=0,this._mouseOrigin={x:0,y:0},this._resizeData={time:-1,timeout:!1,delta:150};var i={themePath:"Themes",theme:"default",loadingClass:"fa fa-spinner fa-pulse",allowContextMenu:!0,hideOnResize:!1,allowCollapse:!0,responseRate:10,moveStartDelay:300,edgeAnchorSize:50,panelAnchorSize:"15%",detachToWidth:"50%",detachToHeight:"50%"};this._options={};for(var s in i)this._options[s]=i[s];for(var s in e)this._options[s]=e[s];this.__init()},themePath:function(t){return void 0!==t&&(this._options.themePath=t),this._options.themePath},theme:function(t){if(void 0!==t){var e=$("#wcTheme"),i=(new Date).getTime(),s=t.indexOf(".css");s>-1&&(t=t.substring(0,s));var n=$('<link id="wcTheme" rel="stylesheet" type="text/css" href="'+this._options.themePath+"/"+t+".css?v="+i+'"/>');this._options.theme=t;var a=this;n[0].onload=function(){e.remove(),a.__update()},$("head").append(n)}return this._options.theme},isCollapseEnabled:function(){return this._canOrientTabs&&this._options.allowCollapse},registerPanelType:function(t,e,i){var s=e;"function"==typeof s&&(s={onCreate:e},console.log("WARNING: Passing in the creation function directly to wcDocker.registerPanelType parameter 2 is now deprecated and will be removed in the next version!  Please use the preferred options object instead.")),"undefined"!=typeof i&&(s.isPrivate=i,console.log("WARNING: Passing in the isPrivate flag to wcDocker.registerPanelType parameter 3 is now deprecated and will be removed in the next version!  Please use the preferred options object instead.")),$.isEmptyObject(s)&&(s=null);for(var n=0;n<this._dockPanelTypeList.length;++n)if(this._dockPanelTypeList[n].name===t)return!1;this._dockPanelTypeList.push({name:t,options:s});var a=$("menu").find("menu");return a.append($('<menuitem label="'+t+'">')),!0},panelTypes:function(t){for(var e=[],i=0;i<this._dockPanelTypeList.length;++i)(t||!this._dockPanelTypeList[i].options.isPrivate)&&e.push(this._dockPanelTypeList[i].name);return e},panelTypeInfo:function(t){for(var e=0;e<this._dockPanelTypeList.length;++e)if(this._dockPanelTypeList[e].name==t)return this._dockPanelTypeList[e].options;return!1},addPanel:function(t,s,n,a){function r(t){s===e.DOCK.STACKED?this.__addPanelGrouped(t,n,a):this.__addPanelAlone(t,s,n,a),this._placeholderPanel&&t.moveable()&&s!==e.DOCK.FLOAT&&s!==e.DOCK.MODAL&&this.removePanel(this._placeholderPanel)&&(this._placeholderPanel=null),this.__forceUpdate()}for(var o=0;o<this._persistentList.length;++o)if(this._persistentList[o]._type===t){var h=this._persistentList.splice(o,1)[0];return r.call(this,h),h.__trigger(e.EVENT.PERSISTENT_OPENED),h}for(var l=0;l<this._dockPanelTypeList.length;++l)if(this._dockPanelTypeList[l].name===t){var c=this._dockPanelTypeList[l],h=new i(t,c.options);h._parent=this,h.__container(this.$transition);var _=c.options&&c.options.options||{};return h._panelObject=new c.options.onCreate(h,_),r.call(this,h),h}return!1},removePanel:function(t,i){if(!t)return!1;var s=this.__isLastPanel(t),r=t._parent;if(r instanceof a){if(i?(t.__container(this.$transition),t._parent=null):t.__trigger(e.EVENT.CLOSED),!r.removePanel(t)&&!r.isCollapser()){if(s)return this.__addPlaceholder(r),i?t.__trigger(e.EVENT.PERSISTENT_CLOSED):t.__destroy(),!0;var o=this._floatingList.indexOf(r);-1!==o&&this._floatingList.splice(o,1),o=this._frameList.indexOf(r),-1!==o&&this._frameList.splice(o,1),o=this._modalList.indexOf(r),-1!==o&&this._modalList.splice(o,1),this._modalList.length?this.__focus(this._modalList[this._modalList.length-1]):this._floatingList.length&&this.__focus(this._floatingList[this._floatingList.length-1]);var h=r._parent;if(h instanceof n){h.__removeChild(r);var l;h.pane(0)?(l=h.pane(0),h._pane[0]=null):(l=h.pane(1),h._pane[1]=null),l.__container(this.$transition),l._parent=null,o=this._splitterList.indexOf(h),-1!==o&&this._splitterList.splice(o,1);var c=h._parent;parentContainer=h.__container(),h.__destroy(),c instanceof n?(c.__removeChild(h),c.pane(0)?c.pane(1,l):c.pane(0,l)):c===this&&(this._root=l,l._parent=this,l.__container(parentContainer)),this.__update()}else r===this._root&&(this._root=null);this._focusFrame===r&&(this._focusFrame=null),r.__destroy()}return i?t.__trigger(e.EVENT.PERSISTENT_CLOSED):t.__destroy(),!0}return!1},movePanel:function(t,i,s,r){var o=this.__isLastPanel(t),h=t.$container;t._parent instanceof a&&(h=t._parent.$frame);var l=h.offset(),c=h.width(),_=h.height(),p=t._parent,d=!1;if(p instanceof a){d=p._isFloating;for(var f=0;f<p._panelList.length;++f)if(p._panelList[f]===t){p.isCollapser()?p._curTab=-1:p._curTab>=f&&p._curTab--,t.__container(this.$transition),t._parent=null,p._panelList.splice(f,1);break}if(!p.isCollapser()&&-1===p._curTab&&p._panelList.length&&(p._curTab=0),p.__updateTabs(),p.collapse(),!p.isCollapser()&&0===p._panelList.length)if(o)this.__addPlaceholder(p);else{var u=this._floatingList.indexOf(p);-1!==u&&this._floatingList.splice(u,1),u=this._frameList.indexOf(p),-1!==u&&this._frameList.splice(u,1);var g=p._parent;if(g instanceof n){g.__removeChild(p);var m;g.pane(0)?(m=g.pane(0),g._pane[0]=null):(m=g.pane(1),g._pane[1]=null),s===g&&(s._shift=m),m.__container(this.$transition),m._parent=null,u=this._splitterList.indexOf(g),-1!==u&&this._splitterList.splice(u,1);var b=g._parent;parentContainer=g.__container(),g.__destroy(),b instanceof n?(b.__removeChild(g),b.pane(0)?b.pane(1,m):b.pane(0,m)):b===this&&(this._root=m,m._parent=this,m.__container(parentContainer)),this.__update()}this._focusFrame===p&&(this._focusFrame=null),p.__destroy()}}t.initSize(c,_),i===e.DOCK.STACKED?this.__addPanelGrouped(t,s,r):this.__addPanelAlone(t,i,s,r),s==this._placeholderPanel&&(this.removePanel(this._placeholderPanel),this._placeholderPanel=null);var $=t._parent;return $ instanceof a&&1===$._panelList.length&&$.pos(l.left+c/2+20,l.top+_/2+20,!0),this.__update(!0),$ instanceof a&&d!==$._isFloating&&($._isFloating?t.__trigger(e.EVENT.DETACHED):t.__trigger(e.EVENT.ATTACHED)),t.__trigger(e.EVENT.MOVED),t},findPanels:function(t){for(var e=[],i=0;i<this._frameList.length;++i)for(var s=this._frameList[i],n=0;n<s._panelList.length;++n){var a=s._panelList[n];t&&a._type!==t||e.push(a)}return e},startLoading:function(t,e,i){if(!this.$loading){this.$loading=$('<div class="wcLoadingContainer"></div>'),this.$outer.append(this.$loading);var s=$('<div class="wcLoadingBackground"></div>');"number"!=typeof e&&(e=.4),s.css("opacity",e),this.$loading.append(s);var n=$('<div class="wcLoadingIconContainer"><i class="wcLoadingIcon '+this._options.loadingClass+'"></i></div>');if(this.$loading.append(n),t){var a=$('<span class="wcLoadingLabel">'+t+"</span>");this.$loading.append(a)}"number"!=typeof i&&(i=1),n.css("opacity",i),a&&a.css("opacity",i)}},finishLoading:function(t){if(this.$loading)if(t>0){var e=this;this.$loading.fadeOut(t,function(){e.$loading.remove(),e.$loading=null})}else this.$loading.remove(),this.$loading=null},on:function(t,e){return t?(this._events[t]||(this._events[t]=[]),-1!==this._events[t].indexOf(e)?!1:(this._events[t].push(e),!0)):!1},off:function(t,e){if("undefined"==typeof t)this._events={};else if(this._events[t])if("undefined"==typeof e)this._events[t]=[];else for(var i=0;i<this._events[t].length;++i)if(this._events[t][i]===e){this._events[t].splice(i,1);break}},trigger:function(t,e){if(!t)return!1;for(var i=0;i<this._frameList.length;++i)for(var s=this._frameList[i],n=0;n<s._panelList.length;++n){var a=s._panelList[n];a.__trigger(t,e)}this.__trigger(t,e)},basicMenu:function(t,e,i){console.log("WARNING: wcDocker.basicMenu is deprecated, please use wcDocker.menu instead."),this.menu(t,e,i)},menu:function(t,i,n){var a=this;$.contextMenu({selector:t,build:function(t,r){for(var o,h=a.__mouse(r),l=0;l<a._frameList.length;++l){var c=t.hasClass("wcFrame")&&t||t.parents(".wcFrame");if(a._frameList[l].$frame[0]===c[0]){o=a._frameList[l];break}}var _=!1;$(r.target).hasClass("wcTabScroller")&&(_=!0);for(var p={},l=0;l<a._dockPanelTypeList.length;++l){var d=a._dockPanelTypeList[l];if(!d.options.isPrivate){if(d.options.limit>0&&a.findPanels(d.name).length>=d.options.limit)continue;var f=null,u=null,g=d.name;d.options&&(d.options.faicon&&(u=d.options.faicon),d.options.icon&&(f=d.options.icon),d.options.title&&(g=d.options.title)),p[d.name]={name:g,icon:f,faicon:u,className:"wcMenuCreatePanel"}}}var m=0,b={},v=i;"function"==typeof i&&(v=i(t,r));for(var l=0;l<v.length;++l)if($.isEmptyObject(v[l]))b["sep"+m++]="---------";else{var T=v[l].callback;T&&!function(t,e){t.callback=function(t,i){var s=null,n=i.$trigger.parents(".wcFrame").first();if(n.length)for(var r=0;r<a._frameList.length;++r)n[0]===a._frameList[r].$frame[0]&&(s=a._frameList[r].panel());e(t,i,s)}}(v[l],T),b[v[l].name]=v[l]}var w={},y="";if(a.isCollapseEnabled()){var x=o.$collapse.children("div");y=x.hasClass("wcCollapseLeft")?" wcCollapseLeft":x.hasClass("wcCollapseRight")?" wcCollapseRight":" wcCollapseBottom",w[e.DOCK.LEFT]={name:e.DOCK.LEFT,faicon:"sign-in wcCollapseLeft wcCollapsible"},w[e.DOCK.RIGHT]={name:e.DOCK.RIGHT,faicon:"sign-in wcCollapseRight wcCollapsible"},w[e.DOCK.BOTTOM]={name:e.DOCK.BOTTOM,faicon:"sign-in wcCollapseBottom wcCollapsible"}}var C=b;if(n&&($.isEmptyObject(b)||(C["sep"+m++]="---------"),_?(C["Close Panel"]={name:"Remove Panel",faicon:"close",disabled:!o.panel().closeable()},a.isCollapseEnabled()&&(o.isCollapser()?C["Attach Panel"]={name:"Dock Panel",faicon:"sign-out"+y+" wcCollapsed",disabled:!o.panel().moveable()}:C.fold1={name:"Collapse Panel",faicon:"sign-in"+y+" wcCollapsible",items:w,disabled:!o.panel().moveable()}),o._isFloating||(C["Detach Panel"]={name:"Float Panel",faicon:"level-up",disabled:!o.panel().moveable()||o.panel()._isPlaceholder}),C["sep"+m++]="---------",C.fold2={name:"Add Panel",faicon:"columns",items:p,disabled:!(o.panel()._titleVisible&&(!o._isFloating||-1===a._modalList.indexOf(o))),className:"wcMenuCreatePanel"}):(o&&(C["Close Panel"]={name:"Remove Panel",faicon:"close",disabled:!o.panel().closeable()},a.isCollapseEnabled()&&(o.isCollapser()?C["Attach Panel"]={name:"Dock Panel",faicon:"sign-out"+y+" wcCollapsed",disabled:!o.panel().moveable()}:C.fold1={name:"Collapse Panel",faicon:"sign-in"+y+" wcCollapsible",items:w,disabled:!o.panel().moveable()}),o._isFloating||(C["Detach Panel"]={name:"Float Panel",faicon:"level-up",disabled:!o.panel().moveable()||o.panel()._isPlaceholder}),C["sep"+m++]="---------"),C.fold2={name:"Add Panel",faicon:"columns",items:p,disabled:!(!o||!o._isFloating&&o.panel().moveable()),className:"wcMenuCreatePanel"}),o&&!o._isFloating&&o.panel().moveable())){var O=o.__rect();a._ghost=new s(O,h,a),o.__checkAnchorDrop(h,!1,a._ghost,!0,!1,!1),a._ghost.$ghost.hide()}return{callback:function(t,i){if("Close Panel"===t)setTimeout(function(){o.panel().close()},10);else if("Detach Panel"===t)a.movePanel(o.panel(),e.DOCK.FLOAT,!1);else if("Attach Panel"===t){var s=o.$collapse.children("div"),n=e.DOCK.BOTTOM;s.hasClass("wcCollapseLeft")?n=e.DOCK.LEFT:s.hasClass("wcCollapseRight")&&(n=e.DOCK.RIGHT);var r={};switch(n){case e.DOCK.LEFT:r.w=o.$frame.width();break;case e.DOCK.RIGHT:r.w=o.$frame.width();break;case e.DOCK.BOTTOM:r.h=o.$frame.height()}var h=a._collapser[e.DOCK.LEFT]._parent.right();o.collapse(!0),a.movePanel(o.panel(),n,h,r)}else if(t===e.DOCK.LEFT)a.movePanel(o.panel(),e.DOCK.LEFT,e.COLLAPSED);else if(t===e.DOCK.RIGHT)a.movePanel(o.panel(),e.DOCK.RIGHT,e.COLLAPSED);else if(t===e.DOCK.BOTTOM)a.movePanel(o.panel(),e.DOCK.BOTTOM,e.COLLAPSED);else if(a._ghost&&o){var l=a._ghost.anchor(),h=o.panel();l.item&&(h=l.item._parent);var c=a.addPanel(t,l.loc,h,a._ghost.rect());c.focus()}},events:{show:function(t){!function(e){for(var i={},s=t.$menu.find(".context-menu-item"),n=0;n<s.length;++n){var a=$(s[n]),r=a.find("span");r.length&&(i[r[0].innerHTML]=a)}!function o(t){for(var e in t){var s=t[e],n=i[s.name];if(n){var a=$('<div class="wcMenuIcon">');if(n.prepend(a),s.icon&&a.addClass(s.icon),s.faicon&&a.addClass("fa fa-menu fa-"+s.faicon+" fa-lg fa-fw"),n.hasClass("context-menu-submenu")){var r=$('<div class="wcMenuSubMenu fa fa-caret-right fa-lg">');n.append(r)}}s.items&&o(s.items)}}(e)}(C)},hide:function(t){a._ghost&&(a._ghost.destroy(),a._ghost=!1)}},animation:{duration:250,show:"fadeIn",hide:"fadeOut"},reposition:!1,zIndex:200,items:C}}})},bypassMenu:function(){this._menuTimer&&clearTimeout(this._menuTimer);for(var t in $.contextMenu.menus){var e=$.contextMenu.menus[t].selector;$(e).contextMenu(!1)}var i=this;this._menuTimer=setTimeout(function(){for(var t in $.contextMenu.menus){var e=$.contextMenu.menus[t].selector;$(e).contextMenu(!0)}i._menuTimer=null},0)},save:function(){var t={};t.floating=[];for(var i=0;i<this._floatingList.length;++i)t.floating.push(this._floatingList[i].__save());return t.root=this._root.__save(),$.isEmptyObject(this._collapser)||(t.collapsers={left:this._collapser[e.DOCK.LEFT].__save(),right:this._collapser[e.DOCK.RIGHT].__save(),bottom:this._collapser[e.DOCK.BOTTOM].__save()}),JSON.stringify(t,function(t,e){return e==1/0?"Infinity":e})},restore:function(t){var i=JSON.parse(t,function(t,e){return"Infinity"===e?1/0:e});this.clear(),this._root=this.__create(i.root,this,this.$container),this._root.__restore(i.root,this);for(var s=0;s<i.floating.length;++s){var n=this.__create(i.floating[s],this,this.$container);n.__restore(i.floating[s],this)}if(this.__forceUpdate(!1),!$.isEmptyObject(i.collapsers)&&this.isCollapseEnabled()){this.__initCollapsers(),this._collapser[e.DOCK.LEFT].__restore(i.collapsers.left,this),this._collapser[e.DOCK.RIGHT].__restore(i.collapsers.right,this),this._collapser[e.DOCK.BOTTOM].__restore(i.collapsers.bottom,this);var a=this;setTimeout(function(){a.__forceUpdate()})}},clear:function(){this._root=null,this.trigger(e.EVENT.CLOSED);for(var t=0;t<this._splitterList.length;++t)this._splitterList[t].__destroy();for(var t=0;t<this._frameList.length;++t)this._frameList[t].__destroy();for($.isEmptyObject(this._collapser)||(this._collapser[e.DOCK.LEFT].__destroy(),this._collapser[e.DOCK.RIGHT].__destroy(),this._collapser[e.DOCK.BOTTOM].__destroy(),this._collapser={});this._frameList.length;)this._frameList.pop();for(;this._floatingList.length;)this._floatingList.pop();for(;this._splitterList.length;)this._splitterList.pop()},__init:function(){function t(t){var e=x.__mouse(t);x._mouseOrigin.x=e.x,x._mouseOrigin.y=e.y}function i(t){var i=x.__mouse(t);if(3===i.which)return!0;if($("body").removeClass("wcDisableSelection"),x._draggingFrame)for(var s=0;s<x._frameList.length;++s)x._frameList[s].__shadow(!1);if(x._ghost&&(x._draggingFrame||x._creatingPanel)){var n=x._ghost.anchor();if(x._draggingFrame){if(n){if(!n.self&&void 0!==n.loc)if(n.tab&&n.item._parent._parent==x._draggingFrame)x._draggingFrame.tabOrientation(n.tab);else{var r=0;x._draggingFrameTab?r=parseInt($(x._draggingFrameTab).attr("id")):x._draggingFrame.panel(0);var o;if(n.item&&(o=n.item._parent),x._draggingFrame._panelList.indexOf(o)>-1){if(1===x._draggingFrame._panelList.length)return;for(var s=0;s<x._draggingFrame._panelList.length;++s)if(o!==x._draggingFrame._panelList[s]){o=x._draggingFrame._panelList[s],r--;break}}var h=null;if(h=x._draggingFrameTab?x._draggingFrame.panel(parseInt($(x._draggingFrameTab).attr("id"))):x._draggingFrame.panel(),o=x.movePanel(h,n.loc,o,x._ghost.rect()),o._parent.panel(o._parent._panelList.length-1,!0),x._draggingFrameTab){var l=o._parent;l instanceof a&&(r+=l._panelList.length)}else{var c=x._ghost.rect();for(c.tabOrientation||(c.tabOrientation=x._draggingFrame.tabOrientation());x._draggingFrame.panel();)x.movePanel(x._draggingFrame.panel(),e.DOCK.STACKED,o,c)}var l=o._parent;l instanceof a&&l.panel(r),x.__focus(l)}}else if(x._draggingFrameTab||x._draggingFrame.panel(0),x._draggingFrameTab||!x.__isLastFrame(x._draggingFrame)){var o=x._draggingFrame.panel(parseInt($(x._draggingFrameTab).attr("id")));if(x.movePanel(o,e.DOCK.FLOAT,null,x._ghost.__rect()),!x._draggingFrameTab)for(;x._draggingFrame.panel();)x.movePanel(x._draggingFrame.panel(),e.DOCK.STACKED,o,{tabOrientation:x._draggingFrame._tabOrientation});var l=o._parent;l instanceof a&&(l.pos(i.x,i.y+x._ghost.__rect().h/2-10,!0),l._size.x=x._ghost.__rect().w,l._size.y=x._ghost.__rect().h),l.__update(),x.__focus(l)}}else if(x._creatingPanel){var _=e.DOCK.FLOAT,p=null;n&&(_=n.loc,p=n.item?n.item._parent:n.panel),x.addPanel(x._creatingPanel,_,p,x._ghost.rect())}x._ghost.destroy(),x._ghost=null,x.trigger(e.EVENT.END_DOCK),x.__update()}return x._draggingSplitter&&(x._draggingSplitter.$pane[0].removeClass("wcResizing"),x._draggingSplitter.$pane[1].removeClass("wcResizing")),x._draggingSplitter=null,x._draggingFrame=null,x._draggingFrameSizer=null,x._draggingFrameTab=null,x._draggingFrameTopper=!1,x._draggingCustomTabFrame=null,x._removingPanel=null,!0}function n(t){O=t;var e=x.__mouse(t);if(!(3!==e.which&&(x._draggingSplitter||x._draggingFrameSizer||x._draggingCustomTabFrame||x._ghost||x._draggingFrame||x._draggingFrameTab)))return!0;var i=(new Date).getTime();if(i-C<x._options.responseRate)return L||(L=setTimeout(function(){C=0,L=0,n(O)},x._options.responseRate)),!0;if(C=(new Date).getTime(),!(i-E<x._options.moveStartDelay)){if(x._draggingSplitter)x._draggingSplitter.__moveBar(e);else if(x._draggingFrameSizer){var s=x.$container.offset();e.x+=s.left,e.y+=s.top,x._draggingFrame.__resize(x._draggingFrameSizer,e),x._draggingFrame.__update()}else if(x._draggingCustomTabFrame){if(x._draggingCustomTabFrame.moveable()){var a=$(t.target).hasClass("wcPanelTab")?$(t.target):$(t.target).parents(".wcPanelTab");x._draggingFrameTab&&a&&a.length&&x._draggingFrameTab!==t.target&&(x._draggingFrameTab=x._draggingCustomTabFrame.moveTab(parseInt($(x._draggingFrameTab).attr("id")),parseInt(a.attr("id"))))}}else if(x._ghost)if(x._draggingFrame){x._ghost.__move(e);var r=!(x._draggingFrame._isFloating||1===e.which);if(x._draggingFrame.__checkAnchorDrop(e,!0,x._ghost,x._draggingFrame._panelList.length>1&&x._draggingFrameTab,x._draggingFrameTopper,!x.__isLastFrame(x._draggingFrame))){x._draggingFrame.__shadow(!1);var o=$(document.elementFromPoint(e.x,e.y)),a=o.hasClass("wcPanelTab")?o:o.parents(".wcPanelTab");x._draggingFrameTab&&a.length&&x._draggingFrameTab!==a[0]&&(x._draggingFrameTab=x._draggingFrame.__tabMove(parseInt($(x._draggingFrameTab).attr("id")),parseInt(a.attr("id"))))}else{if(x._draggingFrame.__shadow(!0),x.__focus(),!r)for(var h=0;h<x._frameList.length;++h)if(x._frameList[h]!==x._draggingFrame&&x._frameList[h].__checkAnchorDrop(e,!1,x._ghost,!0,x._draggingFrameTopper,!x.__isLastFrame(x._draggingFrame)))return void x._draggingFrame.__shadow(!0);x._ghost.anchor(e,null)}}else x._creatingPanel&&x._ghost.update(e);else x._draggingFrame&&!x._draggingFrameTab&&(x._draggingFrame.__move(e),x._draggingFrame.__update());return!0}}function r(){return this._contextTimer&&clearTimeout(this._contextTimer),$(".wcFrame").contextMenu(!1),this._contextTimer=setTimeout(function(){$(".wcFrame").contextMenu(!0),this._contextTimer=null},100),!0}function o(){return!1}function h(){x._ghost&&x._ghost.$ghost.stop().fadeIn(200)}function l(){x._ghost&&x._ghost.$ghost.stop().fadeOut(200)}function c(t){x._modalList.length&&x._modalList[x._modalList.length-1].__focus(!0)}function _(t){t.preventDefault(),t.returnValue=!1}function p(){$("body").addClass("wcDisableSelection")}function d(t){$("body").removeClass("wcDisableSelection");for(var e=0;e<x._tabList.length;++e){var i=x._tabList[e];if(i.$close[0]===this){var s=i.tab();return i.removeTab(s),void t.stopPropagation()}if(i.$tabLeft[0]===this)return i._tabScrollPos-=i.$tabBar.width()/2,i._tabScrollPos<0&&(i._tabScrollPos=0),i.__updateTabs(),void t.stopPropagation();if(i.$tabRight[0]===this)return i._tabScrollPos+=i.$tabBar.width()/2,i.__updateTabs(),void t.stopPropagation()}}function f(){$("body").removeClass("wcDisableSelection");for(var t=0;t<x._frameList.length;++t){var i=x._frameList[t];if(i.$close[0]===this){var s=i.panel(),n=!1,a=x.panelTypeInfo(s._type);return a&&a.isPersistent&&(n=!0,x._persistentList.push(s)),x.removePanel(s,n),void x.__update()}if(i.$collapse[0]===this){var r=i.$collapse.children("div"),o=e.DOCK.BOTTOM;if(r.hasClass("wcCollapseLeft")?o=e.DOCK.LEFT:r.hasClass("wcCollapseRight")&&(o=e.DOCK.RIGHT),i.isCollapser()){var h={};switch(o){case e.DOCK.LEFT:h.w=i.$frame.width();break;case e.DOCK.RIGHT:h.w=i.$frame.width();break;case e.DOCK.BOTTOM:h.h=i.$frame.height()}var l=x._collapser[e.DOCK.LEFT]._parent.right();i.collapse(!0),x.movePanel(i.panel(),o,l,h)}else x.movePanel(i.panel(),o,e.COLLAPSED);return void x.__update()}if(i.$tabLeft[0]===this)return i._tabScrollPos-=i.$tabBar.width()/2,i._tabScrollPos<0&&(i._tabScrollPos=0),void i.__updateTabs();if(i.$tabRight[0]===this)return i._tabScrollPos+=i.$tabBar.width()/2,void i.__updateTabs();for(var c=0;c<i._buttonList.length;++c)if(i._buttonList[c][0]===this){var _=i._buttonList[c],p={name:_.data("name"),isToggled:!1};_.hasClass("wcFrameButtonToggler")&&(_.toggleClass("wcFrameButtonToggled"),_.hasClass("wcFrameButtonToggled")&&(p.isToggled=!0));var s=i.panel();return s.buttonState(p.name,p.isToggled),void s.__trigger(e.EVENT.BUTTON,p)}}}function u(t){var e=x.__mouse(t);if(2===e.which)for(var i=parseInt($(this).attr("id")),s=0;s<x._frameList.length;++s){var n=x._frameList[s];if(n.$tabBar[0]===$(this).parents(".wcFrameTitleBar")[0]){var a=n._panelList[i];return void(x._removingPanel===a&&(x.removePanel(a),x.__update()))}}}function g(t){var e=x.__mouse(t);if(1!==e.which)return!0;$("body").addClass("wcDisableSelection");for(var i=0;i<x._splitterList.length;++i)if(x._splitterList[i].$bar[0]===this){x._draggingSplitter=x._splitterList[i],x._draggingSplitter.$pane[0].addClass("wcResizing"),x._draggingSplitter.$pane[1].addClass("wcResizing"),t.preventDefault();break}return!0}function m(t){var i=x.__mouse(t);if(3===i.which)return!0;if($(t.target).hasClass("wcFrameButton")||$(t.target).parents(".wcFrameButton").length)return!0;
E=(new Date).getTime(),$("body").addClass("wcDisableSelection");for(var n=0;n<x._frameList.length;++n)if(x._frameList[n].$titleBar[0]==this||x._frameList[n].$tabBar[0]==this){x._draggingFrame=x._frameList[n],x._draggingFrame.__anchorMove(i);var a=$(t.target).hasClass("wcPanelTab")?$(t.target):$(t.target).parents(".wcPanelTab");if(a&&a.length){var r=parseInt(a.attr("id"));x._draggingFrame.panel(r,!0),x._draggingFrameTab=a[0],$(window).focus()}var o=!0;if(x._draggingFrameTab?a.hasClass("wcNotMoveable")&&(o=!1):x._draggingFrame._isFloating&&1===i.which&&(o=!1),o){!x._draggingFrameTab&&x._draggingFrame.isCollapser()&&(x._draggingFrameTab=x._draggingFrame.panel()),x._draggingFrameTopper=$(t.target).parents(".wcFrameTopper").length>0;var h=x._draggingFrame.__rect();x._ghost=new s(h,i,x),x._draggingFrame.__checkAnchorDrop(i,!0,x._ghost,!0,x._draggingFrameTopper,!x.__isLastFrame(x._draggingFrame)),x.trigger(e.EVENT.BEGIN_DOCK)}break}for(var n=0;n<x._tabList.length;++n)if(x._tabList[n].$tabBar[0]==this){x._draggingCustomTabFrame=x._tabList[n];var a=$(t.target).hasClass("wcPanelTab")?$(t.target):$(t.target).parents(".wcPanelTab");if(a&&a.length){var r=parseInt(a.attr("id"));x._draggingCustomTabFrame.tab(r,!0),x._draggingFrameTab=a[0]}break}return x._draggingFrame&&x.__focus(x._draggingFrame),!0}function b(t){var e=x.__mouse(t);if(3===e.which)return!0;for(var i=0;i<x._frameList.length;++i)if(x._frameList[i].panel()&&x._frameList[i].panel().layout().scene()[0]==this){setTimeout(function(){x.__focus(x._frameList[i])},10);break}return!0}function v(t){var e=x.__mouse(t);if(3===e.which)return!0;$("body").addClass("wcDisableSelection");for(var i=0;i<x._frameList.length;++i)if(x._frameList[i]._isFloating){if(x._frameList[i].$top[0]==this){x._draggingFrame=x._frameList[i],x._draggingFrameSizer=["top"];break}if(x._frameList[i].$bottom[0]==this){x._draggingFrame=x._frameList[i],x._draggingFrameSizer=["bottom"];break}if(x._frameList[i].$left[0]==this){x._draggingFrame=x._frameList[i],x._draggingFrameSizer=["left"];break}if(x._frameList[i].$right[0]==this){x._draggingFrame=x._frameList[i],x._draggingFrameSizer=["right"];break}if(x._frameList[i].$corner1[0]==this){x._draggingFrame=x._frameList[i],x._draggingFrameSizer=["top","left"];break}if(x._frameList[i].$corner2[0]==this){x._draggingFrame=x._frameList[i],x._draggingFrameSizer=["top","right"];break}if(x._frameList[i].$corner3[0]==this){x._draggingFrame=x._frameList[i],x._draggingFrameSizer=["bottom","right"];break}if(x._frameList[i].$corner4[0]==this){x._draggingFrame=x._frameList[i],x._draggingFrameSizer=["bottom","left"];break}}return x._draggingFrame&&x.__focus(x._draggingFrame),!0}function T(t){var i=x.__mouse(t);if(1!==i.which)return!0;var n=$(this).data("panel"),a=x.panelTypeInfo(n);if(a){var r={x:i.x-250,y:i.y,w:500,h:500};$("body").addClass("wcDisableSelection"),x._ghost=new s(r,i,x),x._ghost.update(i),x._ghost.anchor(i,x._ghost.anchor()),x._creatingPanel=n,x.__focus(),x.trigger(e.EVENT.BEGIN_DOCK)}}function w(t){var e=x.__mouse(t);if(2!==e.which)return!0;for(var i=parseInt($(this).attr("id")),s=0;s<x._frameList.length;++s){var n=x._frameList[s];if(n.$tabBar[0]===$(this).parents(".wcFrameTitleBar")[0])return x._removingPanel=n._panelList[i],!0}return!0}function y(t){27==t.keyCode&&x._ghost&&(x._ghost.destroy(),x._ghost=!1,x.trigger(e.EVENT.END_DOCK),x._draggingFrame&&x._draggingFrame.__shadow(!1),x._creatingPanel=!1,x._draggingSplitter=null,x._draggingFrame=null,x._draggingFrameSizer=null,x._draggingFrameTab=null,x._draggingFrameTopper=!1,x._draggingCustomTabFrame=null,x._removingPanel=null)}var x=this;this.__compatibilityCheck(),this._root=null,this.__addPlaceholder(),this._options.allowContextMenu&&this.menu(".wcFrame",[],!0),this.theme(this._options.theme),this._updateId=setInterval(function(){if(x._dirty){x._dirty=!1,x._root&&x._root.__update();for(var t=0;t<x._floatingList.length;++t)x._floatingList[t].__update()}},this._options.responseRate),$(window).resize(this.__resize.bind(this)),$("body").on("contextmenu","a, img",r),$("body").on("contextmenu",".wcSplitterBar",o),$("body").on("mouseenter",".wcMenuCreatePanel",h),$("body").on("mouseleave",".wcMenuCreatePanel",l),$("body").on("mousemove",n),$("body").on("touchmove",n),$("body").on("mousedown",t),$("body").on("touchstart",t),$("body").on("mousedown",".wcModalBlocker",c),$("body").on("touchstart",".wcModalBlocker",c),$("body").on("mousedown",".wcPanelTab",_),$("body").on("touchstart",".wcPanelTab",_),$("body").on("mousedown",".wcFrameButtonBar > .wcFrameButton",p),$("body").on("touchstart",".wcFrameButtonBar > .wcFrameButton",p),$("body").on("mousedown",".wcFrameTitleBar",m),$("body").on("touchstart",".wcFrameTitleBar",m),$("body").on("mousedown",".wcSplitterBar",g),$("body").on("touchstart",".wcSplitterBar",g),$("body").on("mousedown",".wcPanelTab",w),$("body").on("touchstart",".wcPanelTab",w),$("body").on("mouseup",".wcPanelTab",u),$("body").on("touchend",".wcPanelTab",u),$("body").on("mousedown",".wcLayout",b),$("body").on("touchstart",".wcLayout",b),$("body").on("mousedown",".wcFrameEdge",v),$("body").on("touchstart",".wcFrameEdge",v),$("body").on("mousedown",".wcCreatePanel",T),$("body").on("touchstart",".wcCreatePanel",T),$("body").on("mouseup",i),$("body").on("touchend",i),$("body").on("click",".wcCustomTab .wcFrameButton",d),$("body").on("click",".wcFrameButtonBar > .wcFrameButton",f),$("body").on("keyup",y);var C=(new Date).getTime(),O=null,L=0,E=0},__testLoadFinished:function(){for(var t=0;t<this._frameList.length;++t)for(var i=this._frameList[t],s=0;s<i._panelList.length;++s){var n=i._panelList[s];if(n._isVisible&&!n._initialized)return;if(n.$loading)return}this.trigger(e.EVENT.LOADED),this.off(e.EVENT.LOADED);for(var t=0;t<this._frameList.length;++t)for(var i=this._frameList[t],s=0;s<i._panelList.length;++s){var n=i._panelList[s];n.off(e.EVENT.LOADED)}},__compatibilityCheck:function(){function t(){for(var t="transform WebkitTransform MozTransform OTransform msTransform".split(" "),e=document.createElement("div"),i=0;i<t.length;i++)if(e&&void 0!==e.style[t[i]])return!0;return!1}Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,s=function(){},n=function(){return i.apply(this instanceof s&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return s.prototype=this.prototype,n.prototype=new s,n}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=this.length>>>0,i=Number(arguments[1])||0;for(i=0>i?Math.ceil(i):Math.floor(i),0>i&&(i+=e);e>i;i++)if(i in this&&this[i]===t)return i;return-1});var e=function(){for(var t=3,e=document.createElement("div"),i=e.getElementsByTagName("i");e.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",i[0];);return t>4?t:void 0}();9>e?this._canOrientTabs=!1:this._canOrientTabs=t();var i=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);$("body").addClass(i?"wcMobile":"wcDesktop")},__findInner:function(){function t(t){return!!(t&&t instanceof a&&t.panel()&&!t.panel().moveable()||t instanceof r)}for(var e=this._root;e&&e instanceof n;){var i=t(e._pane[0]),s=t(e._pane[1]);if(i&&!s)e=e._pane[1];else if(s&&!i)e=e._pane[0];else if(!i&&!s)break}return e},__initCollapsers:function(){function t(t){this._collapser[t]=this.__addCollapser(t,i),i=this._collapser[t]._parent,this._frameList.push(this._collapser[t]._drawer._frame)}if(this.isCollapseEnabled()&&$.isEmptyObject(this._collapser)){var i=this.__findInner();t.call(this,e.DOCK.LEFT),t.call(this,e.DOCK.RIGHT),t.call(this,e.DOCK.BOTTOM);var s=this;setTimeout(function(){s.__update()})}},__update:function(t){this._dirty=!0},__forceUpdate:function(t){this._dirty=!1,this._root&&this._root.__update(t);for(var e=0;e<this._floatingList.length;++e)this._floatingList[e].__update()},__mouse:function(t){if(t.originalEvent&&(t.originalEvent.touches||t.originalEvent.changedTouches)){var e=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];return{x:e.clientX,y:e.clientY,which:1}}return{x:t.clientX||t.pageX,y:t.clientY||t.pageY,which:t.which||1}},__resize:function(t){this._resizeData.time=new Date,this._resizeData.timeout||(this._resizeData.timeout=!0,setTimeout(this.__resizeEnd.bind(this),this._resizeData.delta),this.__trigger(e.EVENT.RESIZE_STARTED)),this.__trigger(e.EVENT.RESIZED),this.__update(!1)},__resizeEnd:function(){new Date-this._resizeData.time<this._resizeData.delta?setTimeout(this.__resizeEnd.bind(this),this._resizeData.delta):(this._resizeData.timeout=!1,this.__trigger(e.EVENT.RESIZE_ENDED))},__focus:function(t,i){var s=this._focusFrame!=t;if(this._focusFrame){this._focusFrame._isFloating&&this._focusFrame.$frame.removeClass("wcFloatingFocus");var n=this._focusFrame;this._focusFrame=null,n.__trigger(e.EVENT.LOST_FOCUS),n.isCollapser()&&s&&(n.collapse(),n.panel(-1))}this._focusFrame=t,this._focusFrame&&(this._focusFrame._isFloating&&(this._focusFrame.$frame.addClass("wcFloatingFocus"),s&&$("body").append(this._focusFrame.$frame)),this._focusFrame.__focus(i),this._focusFrame.__trigger(e.EVENT.GAIN_FOCUS))},__trigger:function(t,e){if(t&&this._events[t])for(var i=this._events[t].slice(0),s=0;s<i.length;++s)i[s].call(this,e)},__isLastPanel:function(t){for(var e=0;e<this._frameList.length;++e){var i=this._frameList[e];if(!i._isFloating&&!i.isCollapser())for(var s=0;s<i._panelList.length;++s){var n=i._panelList[s];if(n!==t&&n.moveable())return!1}}return!0},__isLastFrame:function(t){for(var e=0;e<this._frameList.length;++e){var i=this._frameList[e];if(!i._isFloating&&i!==t&&!i.isCollapser())for(var s=0;s<i._panelList.length;++s){var n=i._panelList[s];if(n.moveable())return!1}}return!0},__create:function(t,e,s){switch(t.type){case"wcSplitter":var r=new n(s,e,t.horizontal);return r.scrollable(0,!1,!1),r.scrollable(1,!1,!1),r;case"wcFrame":var o=new a(s,e,t.floating);return this._frameList.push(o),t.floating&&this._floatingList.push(o),o;case"wcPanel":for(var h=0;h<this._dockPanelTypeList.length;++h)if(this._dockPanelTypeList[h].name===t.panelType){var l=new i(t.panelType,this._dockPanelTypeList[h].options);l._parent=e,l.__container(this.$transition);var c=this._dockPanelTypeList[h].options&&this._dockPanelTypeList[h].options.options||{};l._panelObject=new this._dockPanelTypeList[h].options.onCreate(l,c),l.__container(s);break}return l}return null},__addPanelGrouped:function(t,s,n){var r=s;return s instanceof i&&(r=s._parent),r instanceof a?(n&&n.tabOrientation&&r.tabOrientation(n.tabOrientation),void r.addPanel(t)):void this.__addPanelAlone(t,e.DOCK.LEFT,s,n)},__addPanelAlone:function(t,i,s,r){if(s&&s._shift){var o=s;s=s._shift,o._shift=void 0}if(r){var h=this.$container.width(),l=this.$container.height();r.hasOwnProperty("x")&&(r.x=this.__stringToPixel(r.x,h)),r.hasOwnProperty("y")&&(r.y=this.__stringToPixel(r.y,l)),r.hasOwnProperty("w")||(r.w=t.initSize().x),r.hasOwnProperty("h")||(r.h=t.initSize().y),r.w=this.__stringToPixel(r.w,h),r.h=this.__stringToPixel(r.h,l),t._size.x=r.w,t._size.y=r.h}if(s===e.COLLAPSED){if(this.__initCollapsers(),this._collapser[i]){s=this._collapser[i]._drawer._frame.addPanel(t);var c=this;return setTimeout(function(){c.__update()}),t}return console.log('ERROR: Attempted to collapse panel "'+t._type+'" to invalid location: '+i),!1}if(i!==e.DOCK.FLOAT&&i!==e.DOCK.MODAL){if(s){for(var _=s._parent,p=s;!(_ instanceof n||_.instanceOf(null,"wcDocker"));)p=_,_=_._parent;if(_ instanceof n){var d,f=_.pane(0),u=(_.pane(1),{x:-1,y:-1});if(f===p?(d=new n(this.$transition,_,i!==e.DOCK.BOTTOM&&i!==e.DOCK.TOP),u.x=_.$pane[0].width(),u.y=_.$pane[0].height(),_.pane(0,d)):(d=new n(this.$transition,_,i!==e.DOCK.BOTTOM&&i!==e.DOCK.TOP),u.x=_.$pane[1].width(),u.y=_.$pane[1].height(),_.pane(1,d)),d){if(d.scrollable(0,!1,!1),d.scrollable(1,!1,!1),r||(r={w:t._size.x,h:t._size.y}),r)switch(r.w<0&&(r.w=u.x/2),r.h<0&&(r.h=u.y/2),i){case e.DOCK.LEFT:d.pos(r.w/u.x);break;case e.DOCK.RIGHT:d.pos(1-r.w/u.x);break;case e.DOCK.TOP:d.pos(r.h/u.y);break;case e.DOCK.BOTTOM:d.pos(1-r.h/u.y)}else d.pos(.5);b=new a(this.$transition,d,!1),this._frameList.push(b),i===e.DOCK.LEFT||i===e.DOCK.TOP?(d.pane(0,b),d.pane(1,p)):(d.pane(0,p),d.pane(1,b)),b.addPanel(t)}return}}var g=this,m=this.$container,b=new a(this.$transition,g,!1);if(this._frameList.push(b),g._root){var d=new n(m,g,i!==e.DOCK.BOTTOM&&i!==e.DOCK.TOP);if(d){b._parent=d,d.scrollable(0,!1,!1),d.scrollable(1,!1,!1);var u={x:m.width(),y:m.height()};if(r)switch(r.w<0&&(r.w=u.x/2),r.h<0&&(r.h=u.y/2),i){case e.DOCK.LEFT:d.pos(r.w/u.x);break;case e.DOCK.RIGHT:d.pos(1-r.w/u.x);break;case e.DOCK.TOP:d.pos(r.h/u.y);break;case e.DOCK.BOTTOM:d.pos(1-r.h/u.y)}else d.__findBestPos();i===e.DOCK.LEFT||i===e.DOCK.TOP?(d.pane(0,b),d.pane(1,g._root)):(d.pane(0,g._root),d.pane(1,b)),g._root=d}}else g._root=b,b.__container(m);b.addPanel(t)}else{var b=new a(this.$container,this,!0);if(r&&r.tabOrientation&&b.tabOrientation(r.tabOrientation),this._frameList.push(b),this._floatingList.push(b),this.__focus(b),b.addPanel(t),b.pos(t._pos.x,t._pos.y,!1),i===e.DOCK.MODAL&&(b.$modalBlocker=$('<div class="wcModalBlocker"></div>'),b.$frame.prepend(b.$modalBlocker),t.moveable(!1),b.$frame.addClass("wcModal"),this._modalList.push(b)),r){var v=b.pos(void 0,void 0,!0);r.hasOwnProperty("x")&&(v.x=r.x+r.w/2),r.hasOwnProperty("y")&&(v.y=r.y+r.h/2),b.pos(v.x,v.y,!0),b._size={x:r.w,y:r.h}}}},__addCollapser:function(t,i){var s=null;if(i){for(var a=i._parent,o=i;!(a instanceof n||a.instanceOf(null,"wcDocker"));)o=a,a=a._parent;var h=new n(this.$transition,a,t!==e.DOCK.BOTTOM&&t!==e.DOCK.TOP);if(a.instanceOf(null,"wcDocker")&&(this._root=h,h.__container(this.$container)),a instanceof n){var l=a.left(),c=(a.right(),{x:-1,y:-1});l===o?(c.x=a.$pane[0].width(),c.y=a.$pane[0].height(),a.pane(0,h)):(h=new n(this.$transition,a,t!==e.DOCK.BOTTOM&&t!==e.DOCK.TOP),c.x=a.$pane[1].width(),c.y=a.$pane[1].height(),a.pane(1,h))}if(h){switch(h.scrollable(0,!1,!1),h.scrollable(1,!1,!1),s=new r(this.$transition,h,t),t){case e.DOCK.TOP:case e.DOCK.LEFT:h.pos(0);break;case e.DOCK.BOTTOM:case e.DOCK.RIGHT:h.pos(1)}t===e.DOCK.LEFT||t===e.DOCK.TOP?(h.pane(0,s),h.pane(1,o)):(h.pane(0,o),h.pane(1,s))}}return s},__addPlaceholder:function(t){this._placeholderPanel&&console.log("WARNING: wcDocker creating placeholder panel when one already exists"),this._placeholderPanel=new i(e.PANEL_PLACEHOLDER,{}),this._placeholderPanel._isPlaceholder=!0,this._placeholderPanel._parent=this,this._placeholderPanel.__container(this.$transition),this._placeholderPanel._panelObject=new function(t){t.title(!1),t.closeable(!1)}(this._placeholderPanel),t?this.__addPanelGrouped(this._placeholderPanel,t):this.__addPanelAlone(this._placeholderPanel,e.DOCK.TOP),this.__update()},__stringToPercent:function(t,e){if("string"==typeof t){if(-1!==t.indexOf("%",t.length-1))return parseFloat(t)/100;if(-1!==t.indexOf("px",t.length-2))return parseFloat(t)/e}return parseFloat(t)},__stringToPixel:function(t,e){if("string"==typeof t){if(-1!==t.indexOf("%",t.length-1))return parseFloat(t)/100*e;if(-1!==t.indexOf("px",t.length-2))return parseFloat(t)}return parseFloat(t)}});for(var _ in e)c[_]=e[_];return window.wcDocker=c,c}),i("wcDocker/tabframe",["dcl/dcl","./types","./base"],function(t,e,i){var s=t(i,{declaredClass:"wcTabFrame",LEFT_TAB_BUFFER:15,constructor:function(t,i){this.$container=$(t),this._parent=i,this.$frame=null,this.$tabBar=null,this.$tabScroll=null,this.$center=null,this.$tabLeft=null,this.$tabRight=null,this.$close=null,this._tabOrientation=e.TAB.TOP,this._canScrollTabs=!1,this._tabScrollPos=0,this._curTab=-1,this._layoutList=[],this._moveable=!0,this._boundEvents=[],this.__init()},update:function(){var t=this.$center.scrollTop();this.__updateTabs(),this.$center.scrollTop(t)},destroy:function(){this.__destroy()},tabCount:function(){return this._layoutList.length},tabOrientation:function(t){return void 0!==t&&this._tabOrientation!==t&&this.docker()._canOrientTabs&&(this._tabOrientation=t,this.__updateTabs(),this.__updateTabs()),this._tabOrientation},addTab:function(t,e,i){var s=i||"wcLayoutTable",n=new window[s](".wcDockerTransition",this._parent);return n.name=t,n._scrollable={x:!0,y:!0},n._scroll={x:0,y:0},n._closeable=!1,n._overflowVisible=!1,"undefined"==typeof e||-1>=e?this._layoutList.push(n):this._layoutList.splice(e,0,n),-1===this._curTab&&this._layoutList.length&&(this._curTab=0),this.__updateTabs(),n},removeTab:function(t){if(t>-1&&t<this._layoutList.length){var i=this._layoutList[t].name;return this._layoutList[t].__destroy(),this._layoutList.splice(t,1),this._curTab>=t&&(this._curTab--,this._curTab<0&&(this._curTab=0)),this.__updateTabs(),this._parent.__trigger(e.EVENT.CUSTOM_TAB_CLOSED,{obj:this,name:i,index:t}),!0}return!1},tab:function(t,i){if("undefined"!=typeof t&&t>-1&&t<this._layoutList.length){this.$tabBar.find('> .wcTabScroller > .wcPanelTab[id="'+this._curTab+'"]').removeClass("wcPanelTabActive"),this.$center.children('.wcPanelTabContent[id="'+this._curTab+'"]').addClass("wcPanelTabContentHidden"),this._curTab=t,this.$tabBar.find('> .wcTabScroller > .wcPanelTab[id="'+t+'"]').addClass("wcPanelTabActive"),this.$center.children('.wcPanelTabContent[id="'+t+'"]').removeClass("wcPanelTabContentHidden"),this.__updateTabs(i);var s=this._layoutList[this._curTab].name;this._parent.__trigger(e.EVENT.CUSTOM_TAB_CHANGED,{obj:this,name:s,index:t})}return this._curTab},layout:function(t){return t>-1&&t<this._layoutList.length?this._layoutList[t]:!1},moveTab:function(t,e){if(t>=0&&t<this._layoutList.length&&e>=0&&e<this._layoutList.length){var i=this._layoutList.splice(t,1);return this._layoutList.splice(e,0,i[0]),this._curTab===t&&(this._curTab=e),this.__updateTabs(),this.$tabBar.find('> .wcTabScroller > .wcPanelTab[id="'+e+'"]')[0]}return!1},moveable:function(t){return"undefined"!=typeof t&&(this._moveable=t),this._moveable},closeable:function(t,e){if(t>-1&&t<this._layoutList.length){var i=this._layoutList[t];return"undefined"!=typeof e&&(i._closeable=e),i._closeable}return!1},scrollable:function(t,e,i){if(t>-1&&t<this._layoutList.length){var s=this._layoutList[t],n=!1;return"undefined"!=typeof e&&(s._scrollable.x=e,n=!0),"undefined"!=typeof i&&(s._scrollable.y=i,n=!0),n&&this.__onTabChange(),{x:s._scrollable.x,y:s._scrollable.y}}return!1},overflowVisible:function(t,e){if(t>-1&&t<this._layoutList.length){var i=this._layoutList[t];return"undefined"!=typeof overflow&&(i._overflowVisible=overflow,this.__onTabChange()),i._overflowVisible}return!1},fitContents:function(t,e,i){if(t>-1&&t<this._layoutList.length){var s=this._layoutList[t];s.hasOwnProperty("_fitContents")||(s._fitContents={x:!1,y:!1});var n=!1;return"undefined"!=typeof e&&(s._fitContents.x=e,n=!0),"undefined"!=typeof i&&(s._fitContents.y=i,n=!0),n&&this.__onTabChange(),{x:s._fitContents.x,y:s._fitContents.y}}return!1},icon:function(t,e){if(t>-1&&t<this._layoutList.length){var i=this._layoutList[t];i.$icon||(i.$icon=$("<div>")),i.$icon.removeClass(),i.$icon.addClass("wcTabIcon "+e)}},faicon:function(t,e){if(t>-1&&t<this._layoutList.length){var i=this._layoutList[t];i.$icon||(i.$icon=$("<div>")),i.$icon.removeClass(),i.$icon.addClass("fa fa-fw fa-"+e)}},__init:function(){this.$frame=$('<div class="wcCustomTab wcWide wcTall">'),this.$tabBar=$('<div class="wcFrameTitleBar wcCustomTabTitle wcWide">'),this.$tabScroll=$('<div class="wcTabScroller">'),this.$center=$('<div class="wcFrameCenter wcPanelBackground">'),this.$tabLeft=$('<div class="wcFrameButton" title="Scroll tabs to the left."><span class="fa fa-arrow-left"></span>&lt;</div>'),this.$tabRight=$('<div class="wcFrameButton" title="Scroll tabs to the right."><span class="fa fa-arrow-right"></span>&gt;</div>'),this.$close=$('<div class="wcFrameButton" title="Close the currently active panel tab"><span class="fa fa-close"></span>X</div>'),this.$buttonBar=$('<div class="wcFrameButtonBar">'),this.$tabBar.append(this.$tabScroll),this.$tabBar.append(this.$buttonBar),this.$buttonBar.append(this.$close),this.$frame.append(this.$center),this.$frame.append(this.$tabBar),this.__container(this.$container),this._boundEvents.push({event:e.EVENT.UPDATED,handler:this.update.bind(this)}),this._boundEvents.push({event:e.EVENT.CLOSED,handler:this.destroy.bind(this)});for(var t=0;t<this._boundEvents.length;++t)this._parent.on(this._boundEvents[t].event,this._boundEvents[t].handler);var i=this.docker();i&&i._tabList.push(this)},__updateTabs:function(t){this.$tabScroll.empty();var i=function(t){switch(this._tabOrientation){case e.TAB.BOTTOM:return t.offset().left;case e.TAB.TOP:return t.offset().left;case e.TAB.LEFT:return t.offset().top;case e.TAB.RIGHT:return t.offset().top}}.bind(this),s=[],n=0,a=i(this.$tabScroll);this.$center.children(".wcPanelTabContent").each(function(){$(this).addClass("wcPanelTabContentHidden wcPanelTabUnused")});for(var r=0;r<this._layoutList.length;++r){var o=$('<div id="'+r+'" class="wcPanelTab"><div>'+this._layoutList[r].name+"</div></div>");this._moveable&&o.addClass("wcCustomTabMoveable"),this.$tabScroll.append(o),this._layoutList[r].$icon&&o.find("div").prepend(this._layoutList[r].$icon);var h=this.$center.children('.wcPanelTabContent[id="'+r+'"]');h.length||(h=$('<div class="wcPanelTabContent wcPanelTabContentHidden" id="'+r+'">'),this.$center.append(h)),this._layoutList[r].__container(h),this._layoutList[r]._parent=this;var l=this._curTab===r;h.removeClass("wcPanelTabUnused"),l&&(o.addClass("wcPanelTabActive"),h.removeClass("wcPanelTabContentHidden")),n=i(o)-a,s.push(n),n+=o.outerWidth()}var c=0,_=this.$tabBar.height();switch(this._tabOrientation){case e.TAB.TOP:this.$tabBar.addClass("wcTabTop").removeClass("wcTabLeft wcTabRight wcTabBottom"),this.$center.css("top",_).css("left",0).css("right",0).css("bottom",0),c=this.$center.width();break;case e.TAB.BOTTOM:this.$tabBar.addClass("wcTabBottom").removeClass("wcTabTop wcTabLeft wcTabRight"),this.$center.css("top",0).css("left",0).css("right",0).css("bottom",_),c=this.$center.width();break;case e.TAB.LEFT:this.$tabBar.addClass("wcTabLeft").removeClass("wcTabTop wcTabRight wcTabBottom"),this.$center.css("top",0).css("left",_).css("right",0).css("bottom",0),c=this.$center.height();break;case e.TAB.RIGHT:this.$tabBar.addClass("wcTabRight").removeClass("wcTabTop wcTabLeft wcTabBottom"),this.$center.css("top",0).css("left",0).css("right",_).css("bottom",0),c=this.$center.height()}this.$center.children(".wcPanelTabUnused").each(function(){$(this).remove()});var p=this.__onTabChange();if(t)for(var r=0;r<s.length;++r)if(r===this._curTab){var d=s[r],f=n;r+1<s.length&&(f=s[r+1]);var u=-parseInt(this.$tabScroll.css("left")),g=c-p;u>d?(this._tabScrollPos=d-this.LEFT_TAB_BUFFER,this._tabScrollPos<0&&(this._tabScrollPos=0)):f-u>g&&(this._tabScrollPos=f-g+this.LEFT_TAB_BUFFER);break}if(this._canScrollTabs=!1,n>c-p){this._canScrollTabs=!0,this.$buttonBar.append(this.$tabRight),this.$buttonBar.append(this.$tabLeft),p+=this.$tabRight.outerWidth(),p+=this.$tabLeft.outerWidth();var m=n-(c-p)/2;if(this._tabScrollPos>m)for(var b=this.$tabScroll.children(),r=0;r<b.length;++r){var o=$(b[r]);if(n=i(o)-a,n+o.outerWidth()>m){this._tabScrollPos=n-this.LEFT_TAB_BUFFER,this._tabScrollPos<0&&(this._tabScrollPos=0);break}}}else this._tabScrollPos=0,this.$tabLeft.remove(),this.$tabRight.remove();this.$tabScroll.stop().animate({left:-this._tabScrollPos+"px"},"fast")},__onTabChange:function(){var t=0,i=this.layout(this._curTab);if(i){this.$center.toggleClass("wcScrollableX",i._scrollable.x),this.$center.toggleClass("wcScrollableY",i._scrollable.y),this.$center.toggleClass("wcOverflowVisible",i._overflowVisible),this.$tabLeft.remove(),this.$tabRight.remove(),i._closeable?(this.$close.show(),t+=this.$close.outerWidth()):this.$close.hide(),this._canScrollTabs&&(this.$tabBar.append(this.$tabRight),this.$tabBar.append(this.$tabLeft),t+=this.$tabRight.outerWidth()+this.$tabLeft.outerWidth());var s=this.fitContents(this._curTab);if(s.x){var n=i.scene().outerWidth();(this._tabOrientation===e.TAB.LEFT||this._tabOrientation===e.TAB.RIGHT)&&(n+=this.$tabScroll.height()),this.$container.css("width",n)}else this.$container.css("width","");if(s.y){var a=i.scene().outerHeight();(this._tabOrientation===e.TAB.TOP||this._tabOrientation===e.TAB.BOTTOM)&&(a+=this.$tabScroll.height()),this.$container.css("height",a)}else this.$container.css("height","");switch(this._tabOrientation){case e.TAB.RIGHT:case e.TAB.LEFT:this.$tabBar.css("width",this.$center.height()||"100%");break;case e.TAB.TOP:case e.TAB.BOTTOM:this.$tabBar.css("width",this.$center.width()||"100%")}this.$center.scrollLeft(i._scroll.x),this.$center.scrollTop(i._scroll.y)}return this.$buttonBar.css("min-width",t).css("width",t),t},__scrolled:function(){var t=this.layout(this._curTab);t._scroll.x=this.$center.scrollLeft(),t._scroll.y=this.$center.scrollTop()},__container:function(t){return"undefined"==typeof t?this.$container:(this.$container=t,this.$container?this.$container.append(this.$frame):this.$frame.remove(),this.$container)},__destroy:function(){var t=this.docker();if(t){var e=t._tabList.indexOf(this);e>-1&&t._tabList.splice(e,1)}for(;this._boundEvents.length;)this._parent.off(this._boundEvents[0].event,this._boundEvents[0].handler),this._boundEvents.shift();this._curTab=-1;for(var i=0;i<this._layoutList.length;++i)this._layoutList[i].__destroy();for(;this._layoutList.length;)this._layoutList.pop();this.__container(null),this._parent=null}});return window.wcTabFrame=s,s}),e.config({baseUrl:"./bower_components",packages:[{name:"dcl",location:"./dcl"},{name:"wcDocker",location:"../Code"}]}),e.config({config:{}}),e(["wcDocker/docker","wcDocker/tabframe","wcDocker/iframe"],function(t,e,i){window.wcDocker=t,window.wcTabFrame=e,window.wcIFrame=i,console.log("exported wcDocker")}),i("wcDockerLibrary",function(){})}();